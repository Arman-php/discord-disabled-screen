"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["91315"],{235449:function(e,t,n){n.d(t,{FO:()=>b,nA:()=>p,qQ:()=>N,r7:()=>Z}),n(388685),n(642613),n(583741);var r=n(73800),a=n(392711),l=n.n(a),s=n(442837),i=n(883429),o=n(592125),c=n(496675),d=n(306680),u=n(823379),h=n(709054),g=n(344185),m=n(920303),f=n(569471),x=n(346479),j=n(91159),v=n(231338);function Z(){r.useEffect(()=>{(0,j.A_)()},[])}function b(e){let t=function(e){let t=(0,s.Wu)([c.Z,g.Z,o.Z],()=>l()(g.Z.getThreadsForParent(e.guild_id,e.id)).values().map(e=>{let{id:t}=e;return o.Z.getChannel(t)}).filter(u.lm).filter(e=>c.Z.can(v.Pl.VIEW_CHANNEL,e)).map(e=>e.id).value(),[e.guild_id,e.id]);return r.useMemo(()=>l()(t).sort((e,t)=>h.default.compare(d.ZP.lastMessageId(e),d.ZP.lastMessageId(t))).reverse().value(),[t])}(e),[n,a]=(0,s.e7)([f.Z],()=>l().partition(t,e=>f.Z.hasJoined(e)),[t],s.pF);return{joinedThreadIds:n,unjoinedThreadIds:a}}function p(e){let t=(0,s.Wu)([c.Z,g.Z,o.Z],()=>l()(g.Z.getThreadsForGuild(e)).values().map(e=>l().values(e)).flatten().map(e=>{let{id:t}=e;return o.Z.getChannel(t)}).filter(u.lm).filter(e=>c.Z.can(v.Pl.VIEW_CHANNEL,e)).map(e=>e.id).value(),[e]);return r.useMemo(()=>l()(t).sort((e,t)=>h.default.compare(d.ZP.lastMessageId(e),d.ZP.lastMessageId(t))).reverse().value(),[t])}function N(e,t,n,a){let{canLoadMore:d,loading:u,nextOffset:h,isInitialLoad:g}=(0,s.cj)([m.Z],()=>({loading:m.Z.isLoading(e.id,t,n,a),isInitialLoad:m.Z.isInitialLoad,canLoadMore:m.Z.canLoadMore,nextOffset:m.Z.nextOffset})),f=r.useCallback(()=>{c.Z.can(v.Pl.READ_MESSAGE_HISTORY,e)&&x.Z.loadArchivedThreads({guildId:e.guild_id,channelId:e.id,sortOrder:t,tagFilter:n,tagSetting:a,offset:h})},[e,t,n,a,h]),j=r.useRef(f);return r.useEffect(()=>{j.current=f}),r.useEffect(()=>{g&&j.current()},[e.id,t,n,g]),r.useEffect(()=>{i.Z.resort(e.id)},[e.id]),{threadIds:(0,s.Wu)([m.Z,o.Z,c.Z],()=>l()(m.Z.getThreads(e.id,t,n,a)).filter(e=>{let t=o.Z.getChannel(e);return null!=t&&c.Z.can(v.Pl.VIEW_CHANNEL,t)}).value()),canLoadMore:d,loading:u||g,loadMore:f}}},443671:function(e,t,n){n.d(t,{Z:()=>h});var r=n(255367),a=n(73800),l=n(120356),s=n.n(l),i=n(481060),o=n(487894),c=n(300234),d=n(388032),u=n(258033);function h(e){let{channel:t,threadIds:n,startThread:l,goToThread:h}=e,g=a.useCallback(e=>(0,r.jsx)(c.Z,{threadId:n[e.row],goToThread:h},"".concat(e.section,"-").concat(e.row)),[n,h]);return 0===n.length?(0,r.jsx)(o.Z,{channel:t,header:d.intl.string(d.t.HgTQ8v),startThread:l}):(0,r.jsx)(i.aVo,{className:s()(u.list,u.activeThreadsList),fade:!0,sections:[n.length],sectionHeight:0,rowHeight:80,renderRow:g,renderSection:()=>null,chunkSize:20})}},593130:function(e,t,n){n.d(t,{Z:()=>b}),n(388685);var r=n(255367),a=n(73800),l=n(120356),s=n.n(l),i=n(442837),o=n(481060),c=n(496675),d=n(346479),u=n(665906),h=n(91159),g=n(443671),m=n(342449),f=n(488131),x=n(124368),j=n(981631),v=n(388032),Z=n(269932);function b(e){let{channel:t,className:n,onClose:l}=e,b=(0,i.e7)([c.Z],()=>c.Z.can(j.Plq.READ_MESSAGE_HISTORY,t)),N=(0,u.cD)(t),T=()=>{l(),(0,f.R6)(t,void 0,"Thread Browser Empty State")},y=a.useCallback((e,t)=>{l(),(0,f.ok)(e,!t,x.on.BROWSER)},[l]),P=function(e,t){let[n,r]=a.useState(""),[l,s]=a.useState(!1),[i,o]=a.useState(!1),[c,u]=a.useState([]),h=async()=>{if(null!=n&&""!==n&&!l){s(!0);try{let r=await d.Z.searchThreads(e,t,n);o(!0),u(r)}finally{s(!1)}}};return{query:n,setQuery:e=>{r(e),0===e.length&&o(!1)},isLoading:l,hasResults:i,submit:h,results:c}}(t.guild_id,t.id);return a.useEffect(()=>{(0,h.A_)()},[]),(0,r.jsx)("div",{className:s()(n,Z.container),children:(0,r.jsx)(o.y5t,{component:(0,r.jsxs)("div",{className:Z.header,children:[(0,r.jsx)(o.or_,{size:"md",color:"currentColor",className:Z.threadIcon}),(0,r.jsx)(o.X6q,{variant:"heading-md/semibold",className:Z.title,children:v.intl.string(v.t.E3H5lJ)}),b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:Z.divider}),(0,r.jsx)(p,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},P))]}):null,(0,r.jsx)("div",{className:Z.spacer}),N?(0,r.jsx)(o.zxk,{size:o.zxk.Sizes.TINY,className:Z.createButton,onClick:()=>{l(),(0,f.R6)(t,void 0,"Thread Browser Toolbar")},children:v.intl.string(v.t.CumH4u)}):null,(0,r.jsx)(o.P3F,{className:Z.closeIcon,onClick:l,"aria-label":v.intl.string(v.t.cpT0Cg),children:(0,r.jsx)(o.Dio,{size:"md",color:"currentColor"})})]}),children:P.hasResults?(0,r.jsx)(g.Z,{channel:t,startThread:T,goToThread:y,threadIds:P.results}):(0,r.jsx)(m.Z,{channel:t,startThread:T,goToThread:y})})})}function p(e){let{query:t,setQuery:n,submit:a,isLoading:l}=e;return(0,r.jsx)(o.E1j,{autoFocus:!0,className:Z.searchBox,query:t,isLoading:l,onChange:e=>n(e),onClear:()=>n(""),onKeyDown:e=>"Enter"===e.key&&a(),placeholder:v.intl.string(v.t.h0JN7e),"aria-label":v.intl.string(v.t.h0JN7e)})}},487894:function(e,t,n){n.d(t,{Z:()=>c});var r=n(255367);n(73800);var a=n(481060),l=n(499033),s=n(665906),i=n(388032),o=n(268797);function c(e){let{channel:t,header:n,startThread:c}=e,d=(0,s.NE)(t),u=(0,s.Xu)(t);return(0,r.jsxs)("div",{className:o.container,children:[(0,r.jsxs)("div",{className:o.iconContainer,children:[(0,r.jsx)("div",{className:o.icon,children:(0,r.jsx)(a.or_,{size:"custom",color:"currentColor",width:36,height:36})}),(0,r.jsx)(l.Z,{className:o.stars})]}),(0,r.jsx)(a.X6q,{className:o.header,variant:"heading-xl/semibold",children:n}),(0,r.jsx)(a.Text,{color:"header-secondary",variant:"text-md/normal",children:i.intl.string(i.t.jmq9GB)}),d||u?(0,r.jsx)(a.zxk,{className:o.cta,onClick:c,children:i.intl.string(i.t.rBIGBA)}):null]})}},300234:function(e,t,n){n.d(t,{Z:()=>j});var r=n(255367),a=n(73800),l=n(442837),s=n(481060),i=n(239091),o=n(493773),c=n(884338),d=n(592125),u=n(720202),h=n(594174),g=n(260483),m=n(314208),f=n(124368),x=n(915298);let j=a.memo(function(e){let{threadId:t,goToThread:a,showChannelName:o}=e,c=(0,l.e7)([d.Z],()=>d.Z.getChannel(t)),u=(0,l.e7)([d.Z],()=>d.Z.getChannel(c.parent_id));return(0,r.jsxs)(s.P3F,{className:x.container,onClick:e=>a(c,e.shiftKey),onContextMenu:e=>(0,i.jW)(e,async()=>{let{default:e}=await Promise.all([n.e("77564"),n.e("48334")]).then(n.bind(n,422200));return t=>{var n,a;return(0,r.jsx)(e,(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},t),a=a={channel:c},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))}),n))}}),children:[(0,r.jsxs)("div",{className:x.left,children:[(0,r.jsxs)(s.X6q,{className:x.threadNameLine,variant:"heading-md/semibold",children:[(0,r.jsx)("span",{className:x.threadName,children:c.name}),o&&null!=u?(0,r.jsx)("span",{className:x.parentName,children:"#".concat(u.name)}):null]}),(0,m.Z)(c)]}),(0,r.jsx)(v,{channel:c})]})});function v(e){let{channel:t}=e,n=(0,l.e7)([g.Z],()=>{var e;return null!=(e=g.Z.getMemberIdsPreview(t.id))?e:[]}),a=(0,l.e7)([g.Z],()=>{var e;return null!=(e=g.Z.getMemberCount(t.id))?e:0}),s=(0,l.Wu)([h.default],()=>n.map(e=>h.default.getUser(e)));return((0,o.ZP)(()=>{n.filter((e,t)=>null==s[t]).forEach(e=>{u.Z.requestMember(t.guild_id,e)})}),0===n.length)?null:(0,r.jsx)(c.Z,{className:x.facepile,showDefaultAvatarsForNullUsers:!0,guildId:t.guild_id,users:s,count:a,max:f.yX})}},314208:function(e,t,n){n.d(t,{Z:()=>w});var r=n(255367),a=n(73800),l=n(442837),s=n(481060),i=n(99690),o=n(616780),c=n(471445),d=n(905405),u=n(937889),h=n(739566),g=n(267128),m=n(884902),f=n(271383),x=n(306680),j=n(699516),v=n(594174),Z=n(709054),b=n(51144),p=n(144140),N=n(91159),T=n(217702),y=n(388032),P=n(915298);function w(e){return e.isActiveThread()?(0,r.jsx)(C,{channel:e}):(0,r.jsx)(S,{channel:e})}function C(e){let{channel:t}=e,n=(0,l.e7)([p.Z],()=>p.Z.getMostRecentMessage(t.id));return null==n?(0,r.jsx)(I,{channel:t}):(0,r.jsx)(O,{channel:t,message:n})}function I(e){let{channel:t}=e,n=(0,N.Ok)(t);return(0,r.jsxs)(s.Text,{className:P.subtext,variant:"text-sm/normal",color:"header-secondary",children:[y.intl.string(y.t.Jmh6n5),"\xa0 • \xa0",(0,N.Ye)(n)]})}function O(e){let{channel:t,message:n}=e;(0,o.$)({[t.guild_id]:[n.author.id]});let c=(0,l.e7)([v.default],()=>{var e;return null!=(e=v.default.getUser(n.author.id))?e:n.author}),{nick:f,colorString:x,colorStrings:b}=(0,h.ZP)(n),p=(0,m.X)(t.guild_id,b,"ThreadBrowserRowSubtext"),{isBlocked:y,isIgnored:w}=(0,l.cj)([j.Z],()=>({isBlocked:j.Z.isBlockedForMessage(n),isIgnored:j.Z.isIgnoredForMessage(n)}),[n]),C=(0,d.p)(),I=a.useMemo(()=>{let e=null!=n.content&&""!==n.content?(0,u.ZP)(n,{formatInline:!0,shouldFilterKeywords:C}).content:null,{contentPlaceholder:t,renderedContent:a,trailingIcon:l,leadingIcon:s}=(0,g.f)(n,e,y,w,P.messageContent,{trailingIconClass:P.messageContentTrailingIcon,leadingIconClass:P.messageContentLeadingIcon,iconSize:T.WW});return(0,r.jsxs)(r.Fragment,{children:[s,null!=a?a:(0,r.jsx)("span",{children:t}),l]})},[n,y,w,C]);return(0,r.jsxs)(s.Text,{className:P.subtext,variant:"text-sm/normal",color:"header-secondary",children:[(0,r.jsx)(i.Z,{className:P.avatar,user:c,size:s.EFr.SIZE_16}),(0,r.jsx)(s.PUh,{name:f,color:x,roleColors:p,className:P.authorName}),":\xa0",I,"\xa0 • \xa0",(0,N.Ye)(Z.default.extractTimestamp(n.id))]})}function S(e){var t,n,a;let{channel:d}=e,u=(0,l.e7)([x.ZP],()=>x.ZP.lastMessageId(d.id)),h=null==u?new Date(null!=(n=null==(t=d.threadMetadata)?void 0:t.archiveTimestamp)?n:Date.now()).getTime():Z.default.extractTimestamp(u);(0,o.$)({[d.guild_id]:[d.ownerId]});let g=(0,l.e7)([v.default],()=>v.default.getUser(d.ownerId)),j=(0,l.e7)([f.ZP],()=>f.ZP.getMember(d.guild_id,d.ownerId)),p=(0,m.X)(d.guild_id,null==j?void 0:j.colorStrings,"ArchiveTimeSubtext"),T=null!=(a=(0,c.KS)(d))?a:s.or_;return(0,r.jsx)(s.Text,{className:P.subtext,variant:"text-sm/normal",color:"header-secondary",children:null==g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:P.noAvatarIcon,children:(0,r.jsx)(T,{width:10,height:10,size:"custom",color:"currentColor"})}),y.intl.format(y.t["5Wk9+v"],{time:(0,N.Ye)(h)})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{className:P.avatar,user:g,size:s.EFr.SIZE_16}),y.intl.format(y.t.GFDmd3,{authorHook(e,t){var n,a;return(0,r.jsx)(s.PUh,{className:P.startedByName,color:null!=(n=null==j?void 0:j.colorString)?n:void 0,roleColors:p,name:null!=(a=null==j?void 0:j.nick)?a:b.ZP.getName(g)},t)}}),(0,r.jsx)("span",{className:P.bullet,children:"•"}),y.intl.format(y.t["5Wk9+v"],{time:(0,N.Ye)(h)})]})})}},342449:function(e,t,n){n.d(t,{Z:()=>m}),n(388685);var r=n(255367),a=n(73800),l=n(697988),s=n(683860),i=n(481060),o=n(235449),c=n(487894),d=n(300234),u=n(388032),h=n(258033);let g=new Set;function m(e){let{channel:t,startThread:n,goToThread:m}=e,{joinedThreadIds:x,unjoinedThreadIds:j}=(0,o.FO)(t),{threadIds:v,canLoadMore:Z,loading:b,loadMore:p}=(0,o.qQ)(t,s.z.LATEST_ACTIVITY,g,l.z.MATCH_SOME),N=a.useRef(null);(0,o.r7)();let T=a.useCallback(e=>{let t=0===e.section?x:1===e.section?j:v;return(0,r.jsx)(d.Z,{threadId:t[e.row],goToThread:m},"".concat(e.section,"-").concat(e.row))},[v,x,j,m]),y=a.useCallback(e=>0===e.section?(0,r.jsx)(f,{text:u.intl.formatToPlainString(u.t["4E27f3"],{count:x.length})},e.section):1===e.section?(0,r.jsx)(f,{text:u.intl.formatToPlainString(u.t.csPc4O,{count:j.length})},e.section):(0,r.jsx)(f,{text:u.intl.string(u.t["wUNQ+/"])},e.section),[x.length,j.length]),P=a.useCallback(e=>1===e&&x.length>0||2===e&&(x.length>0||j.length>0)?64:32,[x.length,j.length]),w=a.useCallback(()=>{var e;let t=null==(e=N.current)?void 0:e.getScrollerState();if(null==t)return;let n=t.scrollTop+t.offsetHeight;t.scrollHeight-n<200&&p()},[p]);if(0===x.length&&0===j.length&&0===v.length)if(b)return(0,r.jsx)("div",{className:h.list,children:(0,r.jsx)(i.$jN,{className:h.spinner})});else return(0,r.jsx)("div",{className:h.list,children:(0,r.jsx)(c.Z,{channel:t,header:u.intl.string(u.t.HgTQ8v),startThread:n})});return(0,r.jsx)(i.aVo,{ref:N,className:h.list,fade:!0,sections:[x.length,j.length,v.length],sectionHeight:P,rowHeight:80,renderRow:T,renderSection:y,chunkSize:20,onScroll:Z?w:void 0})}function f(e){let{text:t}=e;return(0,r.jsx)(i.Text,{color:"header-secondary",variant:"text-xs/bold",className:h.sectionHeader,children:t})}}}]);
//# sourceMappingURL=105d6caf6e60e63b.js.map