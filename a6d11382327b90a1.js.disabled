"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["3589"],{691891:function(e,t,n){n.d(t,{Z:()=>a});var i=n(255367);n(73800);var r=n(120356),o=n.n(r),l=n(481060),s=n(702107);let c=e=>{let{className:t,onDismiss:n,"aria-label":r}=e;return(0,i.jsx)(l.zxk,{look:l.zxk.Looks.BLANK,size:l.zxk.Sizes.NONE,onClick:n,className:o()(s.dismissButton,t),"aria-label":r,children:(0,i.jsx)(l.Dio,{size:"xs",color:"currentColor",colorClass:s.dismissIcon})})};c.displayName="DismissButton";let a=c},22205:function(e,t,n){n.d(t,{Z:()=>L}),n(388685);var i=n(255367),r=n(73800),o=n(392711),l=n.n(o),s=n(524979),c=n(818405),a=n(587158),u=n(286379),d=n(442837),h=n(481060),p=n(224706),m=n(13245),b=n(615287),f=n(493773),v=n(797614),g=n(703656),y=n(594174),O=n(254761),x=n(70956),C=n(960048),j=n(145597),w=n(333031),P=n(610394),k=n(380736),Z=n(987650),E=n(981631),S=n(388032),z=n(138134);function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let D=l().throttle(()=>{v.Z.increment({name:u.V.APP_CRASHED,tags:["reason:".concat(c.v.UNHANDLED_JS_ERROR),"level:".concat(a.c.FATAL)]},!0)},100,{trailing:!1}),T=10*x.Z.Millis.SECOND;function M(e){var t,n;let{error:o,onLock:l,onReload:c,onDisable:a,onCrashDisabled:u}=e,p=r.useMemo(()=>new s.SpringValue(1),[]),b=r.useRef(null),[v,g]=r.useState(!1),[x,C]=r.useState(!1),j=(0,d.e7)([y.default],()=>y.default.getCurrentUser());(0,f.ZP)(()=>(b.current=setTimeout(w,T),m.Z.track(E.rMx.NOTIFICATION_VIEWED,{notif_type:Z.n0.OverlayCrashed}),()=>{null!=b.current&&clearTimeout(b.current)}));let w=r.useCallback(()=>{p.set(0),null!=b.current&&clearTimeout(b.current),b.current=null,null==l||l(),null==u||u()},[p,l,u]),N=r.useCallback(e=>{x||(C(!0),null==l||l(),m.Z.track(E.rMx.NOTIFICATION_CLICKED,{notif_type:Z.n0.OverlayCrashed,action_type:"reload"},!0),e.stopPropagation(),setTimeout(()=>null==c?void 0:c(),200))},[l,c,x]),D=r.useCallback(e=>{e.stopPropagation(),e.shiftKey?(g(!0),null!=b.current&&clearTimeout(b.current)):g(!1)},[g]),M=r.useCallback(e=>{e.stopPropagation(),null==l||l(),null==a||a()},[a,l]),R=(0,d.e7)([P.ZP],()=>P.ZP.getFocusedRunningGame()),L=v?(0,i.jsxs)("div",{children:[(0,i.jsx)(h.Text,{variant:"text-md/semibold",color:"text-primary",children:S.intl.string(S.t.mn4eXF)}),(0,i.jsxs)("div",{className:z.stackTraceCode,children:[(0,i.jsx)(h.Text,{variant:"text-sm/normal",color:"text-secondary",children:o.message}),(0,i.jsx)(h.Text,{variant:"text-xxs/normal",color:"text-secondary",children:(0,i.jsx)("code",{className:z.code,children:(0,i.jsx)("pre",{children:o.stack})})})]})]}):null,I=v?null:S.intl.string(S.t.oEJEFh),W=null!=(t=null==j?void 0:j.isStaff())&&t||null!=(n=null==j?void 0:j.isStaffPersonal())&&n;return(0,i.jsx)(k.Y,{title:S.intl.string(S.t.U38qZm),body:L,hint:W?I:void 0,confirmText:S.intl.string(S.t.a3HlgI),cancelText:null!=R?S.intl.string(S.t.qIYnPj):void 0,icon:(0,i.jsx)(O.Z,{width:40,height:40,className:z.notificationIcon}),onNotificationClick:D,onConfirmClick:N,onCancelClick:null!=R?M:void 0,onDismissClick:l,expand:!0,locked:!0,notificationId:"overlay-crashed",index:0,status:E._1z.ACTIVE,containerRef:null,contentOpacity:p,className:z.errorNotificationContainer,wrapperClassName:z.errorNotificationWrapper})}class R extends r.PureComponent{componentDidCatch(e,t){let n=(0,g.s1)().location;this.setState({error:e,info:t});let i=(0,j.getPID)();m.Z.setOverlayCrashed(i,e),m.Z.setInputLocked(!0,i);let r=C.Z.captureCrash(e,{extra:t});m.Z.track(E.rMx.APP_CRASHED,{path:n.pathname,extra:t,error_message:e.message,error_stack:e.stack,sentry_issue_id:r,error_level:"fatal"}),D(),this.pid=i}render(){let{children:e,className:t}=this.props,{error:n,showError:r}=this.state;return null!=n?r?(0,i.jsx)(w.Z,{className:z.errorClickNotification,children:(0,i.jsx)(M,{error:n,onLock:()=>{var e;let t=null!=(e=this.pid)?e:(0,j.getPID)();m.Z.setInputLocked(!0,t),this.setState({showError:!1})},onDisable:()=>{let e=P.ZP.getFocusedRunningGame();null!=e&&p.Z.toggleOverlay(e,!1,!1)},onCrashDisabled:()=>{var e;let t=null!=(e=this.pid)?e:(0,j.getPID)();m.Z.updateOverlayState(t,b.mM.OVERLAY_CRASHED_DISABLED),this.setState({showError:!1})},onReload:()=>{m.Z.setReloadOverlay((0,j.getPID)()),this.setState({showError:!1})}})}):null:(0,i.jsx)("div",{className:t,children:e})}constructor(...e){super(...e),N(this,"state",{error:null,showError:!0,info:null}),N(this,"pid",null)}}let L=R},333031:function(e,t,n){n.d(t,{Z:()=>w}),n(388685);var i=n(255367),r=n(73800),o=n(120356),l=n.n(o),s=n(954955),c=n.n(s),a=n(772848),u=n(442837),d=n(902704),h=n(13245),p=n(928518),m=n(237997),b=n(358085),f=n(306381),v=n(610394),g=n(561064),y=n(501787),O=n(520870);function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return{name:e,left:Math.ceil(t.left),top:Math.ceil(t.top),right:Math.ceil(t.right),bottom:Math.ceil(t.bottom)}}let j=r.createContext(new class{observe(e){var t;if(null==this.resizeObserver&&(this.resizeObserver=new this.window.ResizeObserver(this.handleResize)),null==this.mutationObserver){this.mutationObserver=new MutationObserver(this.handleMutations);let e=p.Z.getWindow(y.$J);null!=e&&this.mutationObserver.observe(null==e?void 0:e.document.body,{subtree:!0,attributes:!0})}let n=this.zones.get(e);null!=n&&this.resizeObserver.unobserve(n.element);let i=e.getBoundingClientRect();this.zones.set(e,{element:e,zone:C(null!=(t=null==n?void 0:n.zone.name)?t:(0,a.Z)(),i)}),this.elements.add(e),this.resizeObserver.observe(e),this.updateZones()}unobserve(e){var t;null!=this.zones.get(e)&&(null==(t=this.resizeObserver)||t.unobserve(e),this.zones.delete(e),this.elements.delete(e),this.updateZones())}updateZones(){if(!b.isPlatformEmbedded)return;let e=p.Z.getWindow(y.$J);null!=e&&h.Z.setClickZones(Array.from(this.zones.values()).map(t=>{let{zone:n}=t;return{name:n.name,left:n.left/e.innerWidth,top:n.top/e.innerHeight,right:n.right/e.innerWidth,bottom:n.bottom/e.innerHeight}}))}cleanUp(){var e,t;this.globalUpdate.cancel(),this.zones.clear(),this.elements.clear(),null==(e=this.resizeObserver)||e.disconnect(),null==(t=this.mutationObserver)||t.disconnect(),this.updateZones()}constructor(e){x(this,"resizeObserver",void 0),x(this,"mutationObserver",void 0),x(this,"zones",new Map),x(this,"elements",new Set),x(this,"window",void 0),x(this,"handleResize",()=>{this.globalUpdate()}),x(this,"handleMutations",()=>{this.globalUpdate()}),x(this,"globalUpdate",c()(()=>{let e=!1;for(let[t,n]of this.zones){let i=t.getBoundingClientRect(),r=C(n.zone.name,i);(0,d.Z)(r,n.zone)||(e=!0,n={element:n.element,zone:r},this.zones.set(t,n))}e&&this.updateZones()},250,{trailing:!0,maxWait:1e3})),this.window=e}}((0,g.i)()));function w(e){let{observe:t=!0,className:n,style:o,children:s}=e,c=r.useContext(j),a=(0,u.e7)([v.ZP],()=>v.ZP.hasRenderDebugMode(f.G.ClickZones)),d=(0,u.e7)([m.default],()=>m.default.disableClickableRegions),[{refHandler:h,setObserve:p}]=r.useState(()=>{let e=null;return{setObserve(t){null!=e&&(t?c.observe(e):c.unobserve(e))},refHandler(t){null!=e&&c.unobserve(e),e=t}}});return r.useLayoutEffect(()=>{d?p(!1):p(t)},[t,p,d]),(0,i.jsx)("div",{ref:h,style:o,className:l()(n,O.clickable,a&&O.debugMode),"data-click-zone":!0,children:s})}},380736:function(e,t,n){n.d(t,{Y:()=>O,Z:()=>j}),n(388685);var i=n(255367),r=n(73800),o=n(120356),l=n.n(o),s=n(524979),c=n(442837),a=n(481060),u=n(13245),d=n(145597),h=n(691891),p=n(333031),m=n(610394),b=n(693091),f=n(981631),v=n(388032),g=n(560226);function y(e){e.currentTarget.scrollTo(0,0)}let O=r.memo(function(e){let{maxBodyLines:t,expand:n=!1,onNotificationShow:o,onDismissClick:u,onConfirmClick:p,onCancelClick:b,onNotificationClick:O,hint:x,cancelText:C,confirmText:j,icon:w,body:P,title:k,renderFooter:Z,contentOpacity:E,status:S,containerRef:z,className:N,wrapperClassName:D}=e,[T,M]=r.useState(!1),R=n||T||S===f._1z.FOCUSED,L=(0,c.e7)([m.ZP],()=>m.ZP.isInputLocked((0,d.getPID)()));r.useEffect(()=>{null==o||o()},[o]);let I=r.useCallback(e=>{e.stopPropagation(),null==u||u(e)},[u]),W=r.useCallback(e=>{e.stopPropagation(),null==p||p(e)},[p]),A=r.useCallback(e=>{e.stopPropagation(),null==b||b(e)},[b]),_=r.useCallback(()=>{M(!0)},[]),K=r.useCallback(()=>{M(!1)},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:l()(g.overflowWrapper,D),onScroll:y,children:(0,i.jsx)(a.P3F,{innerRef:z,ignoreKeyPress:!0,onMouseOver:_,onMouseLeave:K,onClick:O,className:l()(g.container,{[g.clickable]:null!=O},N),children:function(){let e=null==Z?void 0:Z(R,L);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.animated.div,{className:g.iconAndDetails,style:{opacity:E},children:[null==w?null:"string"==typeof w?(0,i.jsx)(a.qEK,{src:w,size:a.EFr.SIZE_40,className:g.avatar,"aria-hidden":!0}):(0,i.jsx)("div",{className:g.avatar,children:w}),(0,i.jsxs)("div",{className:g.details,children:[(0,i.jsx)(a.Text,{color:"interactive-normal",variant:"text-sm/semibold",lineClamp:2,children:k}),null!=P?(0,i.jsx)(a.Text,{color:"interactive-normal",variant:"text-sm/normal",lineClamp:null!=t?t*(R?2:1):void 0,children:P}):null,function(){let e="function"==typeof x?x(R,L):x;return null!=x?(0,i.jsx)(a.Text,{className:g.hint,color:"text-muted",variant:"text-xxs/medium",children:e}):null}(),null==p&&null==b?null:(0,i.jsxs)("div",{className:g.buttonContainer,children:[null!=p?(0,i.jsx)(a.zxk,{className:g.button,size:a.zxk.Sizes.SMALL,color:a.zxk.Colors.GREEN,onClick:W,children:null!=j?j:v.intl.string(v.t.BddRzc)}):null,null!=b?(0,i.jsx)(a.zxk,{className:g.button,size:a.zxk.Sizes.SMALL,look:a.zxk.Looks.OUTLINED,color:a.zxk.Colors.PRIMARY,onClick:A,children:null!=C?C:v.intl.string(v.t["ETE/oK"])}):null]})]})]}),null!=e&&(0,i.jsx)(a.P3F,{className:g.footer,ignoreKeyPress:!0,onClick:e=>e.stopPropagation(),children:e})]})}()})}),(0,i.jsx)(h.Z,{className:g.dismissButton,onDismiss:I,"aria-label":v.intl.string(v.t.LnEgqa)})]})});function x(e){let{springs:{opacity:t,scale:n,transform:r,height:o},index:c,children:a,locked:u,animationWrapperClassName:d}=e;return(0,i.jsx)(s.animated.div,{className:l()(g.animationWrapper,d),style:{pointerEvents:u&&0!==c?"none":"auto",zIndex:Math.max(5-c,0),opacity:t,transform:r.to(e=>"translate3d(0, ".concat(e,"px, 0)")),scale:n.to([0,1],[.7,1]),height:o,maxWidth:0===c?void 0:"100%"},children:a})}function C(e){let{observe:t,children:n}=e;return t?(0,i.jsx)(p.Z,{className:g.clickZone,children:n}):n}function j(e){var t,n;let{notification:o,index:l,locked:s,transitionState:c,cleanUp:a}=e,{id:d,props:{onNotificationShow:h,onDismissClick:p,onNotificationClick:m,onConfirmClick:f,onCancelClick:v,renderFooter:g,animationWrapperClassName:y}}=o,j=r.useCallback(()=>{h(d)},[h,d]),w=r.useCallback(e=>{u.Z.updateNotificationStatus(d),null==p||p(e,d)},[d,p]),P=r.useCallback(e=>{null==m||m(e,d)},[m,d]),k=r.useCallback(e=>{null==f||f(e,d)},[f,d]),Z=r.useCallback(e=>{null==v||v(e,d)},[v,d]),E=r.useCallback((e,t)=>null==g?void 0:g(e,d,t),[g,d]),{props:{onNotificationShow:S,onDismissClick:z,renderFooter:N,onNotificationClick:D,onConfirmClick:T,onCancelClick:M,disableClickableRegions:R=!1},status:L}=o,I=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(o.props,["onNotificationShow","onDismissClick","renderFooter","onNotificationClick","onConfirmClick","onCancelClick","disableClickableRegions"]),{ref:W,springs:A}=(0,b.X4)(o.id,c,a);return(0,i.jsx)(x,{transitionState:c,springs:A,index:l,locked:s,animationWrapperClassName:y,children:(0,i.jsx)(C,{observe:0===l&&!R,children:(0,i.jsx)(O,(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})}return e}({},I),n=n={title:"function"==typeof I.title?I.title(w):I.title,containerRef:W,notificationId:o.id,onNotificationShow:0===l?j:void 0,onDismissClick:w,onNotificationClick:null!=m?P:void 0,onConfirmClick:null!=f?k:void 0,onCancelClick:null!=v?Z:void 0,renderFooter:E,expand:!1,index:l,locked:s,status:L,contentOpacity:A.contentOpacity},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n.push.apply(n,i)}return n})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))})})}},693091:function(e,t,n){n.d(t,{AS:()=>l,S4:()=>s,X4:()=>u}),n(388685);var i=n(73800),r=n(481060);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{updateState(e,t){this.items=e;let n=this.locked!==t;this.locked=t,this.computeLayout(n)}initialize(e){if(null==this.resizeObserver){for(let[,{element:n}]of(this.resizeObserver=new e.ResizeObserver(this.handleResize),this.listeners)){var t;null==(t=this.resizeObserver)||t.observe(n)}this.queueCompute()}}cleanUp(){var e;null==(e=this.resizeObserver)||e.disconnect(),this.resizeObserver=void 0,this.listeners.clear()}queueCompute(){this.queuedCompute||(this.queuedCompute=!0,Promise.resolve().then(()=>this.computeLayout()))}computeLayout(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.queuedCompute=!1;let t=0,n=0;for(let i of this.items){let r=this.listeners.get(i.notification.id);if(null==r)continue;let{offsetHeight:o}=r.element;(r.top!==t||r.height!==o||r.index!==n)&&(e=!0),r.top=t,r.height=o,r.index=n,0===t&&(this.matchHeight!==o&&(e=!0),this.matchHeight=o),t+=o+8,n++}e&&this.broadcastLayoutUpdates()}broadcastLayoutUpdates(){for(let e of this.items){let t=this.listeners.get(e.notification.id);null!=t&&t.callback({locked:this.locked,matchHeight:this.matchHeight,height:t.height,top:t.top,index:t.index})}}subscribe(e,t,n){var i;this.listeners.set(e,{notificationId:e,callback:n,element:t,height:0,top:0,index:0}),null==(i=this.resizeObserver)||i.observe(t),this.queueCompute()}unsubscribe(e){var t;let n=this.listeners.get(e);null!=n&&(null==(t=this.resizeObserver)||t.unobserve(n.element),this.listeners.delete(e),this.queueCompute())}getLayoutSpecs(e){return this.listeners.get(e)}constructor(e){o(this,"resizeObserver",void 0),o(this,"listeners",new Map),o(this,"queuedCompute",!1),o(this,"items",[]),o(this,"matchHeight",0),o(this,"locked",!0),o(this,"handleResize",e=>{this.computeLayout()}),this.locked=e}}let s=i.createContext(new l(!0));function c(e,t,n){return t&&0!==e?20*Math.max(e/5,0):n}let a={mass:.8,friction:25,tension:320};function u(e,t,n){let[o,l]=(0,r.q_F)(()=>({from:{opacity:0,scale:1,transform:0,height:0,contentOpacity:1}}),void 0,[]),u=i.useRef(l),d=i.useContext(s),h=i.useMemo(()=>{let t=!1;return n=>{null==n?d.unsubscribe(e):d.subscribe(e,n,e=>{let{locked:n,matchHeight:i,height:r,top:o,index:l}=e,{current:s}=u,d={opacity:n&&l>4?0:n?Math.min(1-l/4,1):1,scale:n?Math.min(1-l/4,1):1,transform:c(l,n,o),contentOpacity:n&&l>0?0:1,height:n?i:r};s({from:t?void 0:{opacity:0,scale:1.1,transform:-((n?i:r)*1),contentOpacity:1,height:n?i:r},to:d,config:a}),t=!0})}},[e,d]);return i.useLayoutEffect(()=>{if(t===r.pJH.YEETED){let t=d.getLayoutSpecs(e);if(null==t)return void n();u.current({to:{scale:.8,opacity:0,transform:c(t.index,d.locked,t.top)+(d.locked?0:t.height/2)},config:a}),setTimeout(n,300)}},[t,n,e,d]),{ref:h,springs:o}}},561064:function(e,t,n){n.d(t,{Z:()=>u,i:()=>a});var i=n(442837),r=n(850405),o=n(426419),l=n(928518),s=n(501787),c=n(981631);function a(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.Z,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.e)();return null!=(t=null!=(e=n.getWindow(s.$J))?e:i?n.getWindow(c.KJ3.ACTIVITY_POPOUT):void 0)?t:window}function u(){let e=(0,o.P)();return(0,i.e7)([l.Z],()=>a(l.Z,e))}},238246:function(e,t,n){n.d(t,{Z:()=>ee}),n(388685);var i,r=n(255367),o=n(73800),l=n(120356),s=n.n(l),c=n(670481),a=n(512722),u=n.n(a),d=n(688642),h=n(731965),p=n(442837),m=n(481060),b=n(490173),f=n(175724),v=n(280492),g=n(40851),y=n(607070),O=n(899663),x=n(636449),C=n(317381),j=n(617552),w=n(100527),P=n(906732),k=n(168551),Z=n(260035),E=n(628123),S=n(686546),z=n(950796),N=n(151851),D=n(587061),T=n(540059),M=n(280049),R=n(314910),L=n(22205),I=n(746106),W=n(892071),A=n(740492),_=n(358085),K=n(62883),F=n(998502),U=n(473159),q=n(928518),B=n(981631),H=n(501787),G=n(388032),J=n(728294);function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){V(e,t,n[t])})}return e}function $(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n.push.apply(n,i)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}class Q extends(i=o.Component){componentDidMount(){let{guestWindow:e}=this.props,t=e.document;null==t.querySelector("title")&&null!=t.head&&t.head.appendChild(t.createElement("title")),this.updateTitle(),this.updateClientTheme(),(0,U.O)(e),e.addEventListener("blur",this.handleBlur),_.isPlatformEmbedded?t.addEventListener("contextmenu",K.contextMenuCallbackNative,!1):t.addEventListener("contextmenu",K.contextMenuCallbackWeb,!1),e.addEventListener("beforeunload",this.beforeUnload),this.registerPopoutGlobalKeybinds()}componentDidUpdate(e){let{title:t,clientThemesCSS:n}=this.props;e.title!==t&&this.updateTitle(),e.clientThemesCSS!==n&&this.updateClientTheme()}componentWillUnmount(){let{guestWindow:e}=this.props,t=e.document;this.unregisterPopoutGlobalKeybinds(),e.removeEventListener("blur",this.handleBlur),_.isPlatformEmbedded?t.removeEventListener("contextmenu",K.contextMenuCallbackNative):t.removeEventListener("contextmenu",K.contextMenuCallbackWeb),(0,h.j)(()=>m.s9z.setState(e=>$(Y({},e),{[m.u1M]:[]}))),e.removeEventListener("beforeunload",this.beforeUnload)}updateTitle(){let{title:e,guestWindow:t}=this.props,n=t.document.querySelector("title");null!=n&&(n.innerText=e)}updateClientTheme(){let{clientThemesCSS:e,guestWindow:t}=this.props,n=t.document,i=n.head;u()(null!=i,"Window document ".concat("head"," was null"));let r=i.querySelector("style[".concat(k.PQ,"]"));if(null!=r){r.textContent=e;return}let o=n.createElement("style");o.setAttribute(k.PQ,"true"),o.textContent=e,i.appendChild(o)}registerPopoutGlobalKeybinds(){let{guestWindow:e}=this.props,t=e.document;for(let e of(this._combokeys=(0,M.r)(t.documentElement),[v.iN,v.oV,f.f]))if(e.comboKeysBindGlobal)for(let t of e.binds)this._combokeys.bindGlobal(t,(t,n)=>("function"==typeof e.action&&e.action(t,n),!1))}unregisterPopoutGlobalKeybinds(){null!=this._combokeys&&this._combokeys.reset()}render(){let{focused:e,forcedColors:t,children:n,windowKey:i,isFullScreen:o,isRefreshEnabled:l,withTitleBar:a,guestWindow:u,clientThemesClassName:h,contentClassName:p}=this.props,f=(0,_.getPlatform)(),v=a&&!o,y=i===H.$J?L.Z:E.Z;return(0,r.jsx)(d.VK,{children:(0,r.jsx)(I.w,{windowKey:i,children:(0,r.jsx)(O.Z,{children:(0,r.jsxs)(m.JcV,{containerRef:this.rootRef,children:[(0,r.jsx)(X,{guestWindow:u,className:h,children:(0,r.jsxs)(y,{children:[(0,r.jsx)(S.Co,{}),(0,r.jsx)(g.Wu,{appContext:B.IlC.POPOUT,renderWindow:u,children:(0,r.jsx)(Z.m,{children:(0,r.jsxs)(R.yP,{children:[(0,r.jsxs)("div",{className:J.popout,children:[l&&v&&(0,r.jsx)(z.T,{windowKey:i,short:!0}),!l&&v&&null!=f?(0,r.jsx)(N.Z,{focused:e,type:f,windowKey:i,macOSFrame:!0}):null,(0,r.jsx)("div",{className:s()(J.content,p),children:n})]}),(0,r.jsx)(m.nKe,{}),(0,r.jsx)(b.Z,{}),(0,r.jsx)(R.Un,{})]})})})]})}),(0,r.jsx)(c.OU,{})]})})},t)})}constructor(...e){super(...e),V(this,"rootRef",o.createRef()),V(this,"_cleanupWindowActionCreators",void 0),V(this,"_combokeys",null),V(this,"beforeUnload",e=>{let t=()=>{q.Z.unmountWindow(this.props.windowKey),_.isPlatformEmbedded&&F.ZP.close(this.props.windowKey)};if(null==this.props.connectedEmbeddedActivity||A.ZP.disableEmbeddedActivityPopOutAlert)t();else{if(!_.isPlatformEmbedded)return;(0,x.R)()||this.props.windowKey===H.$J?t():(e.returnValue=G.intl.string(G.t["bST/Y2"]),(0,j.Z)({onConfirm:()=>{t()},usesPopoutContext:!0}))}}),V(this,"handleBlur",()=>{var e,t;null==(e=(t=this.props).onBlur)||e.call(t)})}}V(Q,"defaultProps",{withTitleBar:!0});let X=o.forwardRef(function(e,t){let{guestWindow:n,className:i,children:l}=e,{lang:c,style:a,className:d}=(0,W.vP)();return o.useEffect(()=>{let e=n.document.documentElement;u()(null!=e,"Window document element was null"),e.setAttribute("style",a)},[n,a]),o.useEffect(()=>{let e=n.document.documentElement;u()(null!=e,"Window document element was null"),e.setAttribute("lang",c)},[n,c]),(0,r.jsx)("div",{"data-popout-root":!0,ref:t,className:s()(d,i),children:l})}),ee=o.forwardRef(function(e,t){let{guestWindow:n,focused:i,isFullScreen:o}=(0,p.cj)([q.Z],()=>({guestWindow:q.Z.getWindow(e.windowKey),focused:q.Z.getWindowFocused(e.windowKey),isFullScreen:q.Z.isWindowFullScreen(e.windowKey)}));u()(null!=n,"Missing guestWindow reference");let l=(0,T.Q3)("PopoutWindow"),{forcedColors:s,connectedEmbeddedActivity:c}=(0,p.cj)([y.Z,C.ZP],()=>({forcedColors:y.Z.useForcedColors?"yes":"no",connectedEmbeddedActivity:C.ZP.getCurrentEmbeddedActivity()}));(0,D.Z)(n,!1);let{analyticsLocations:a}=(0,P.ZP)(w.Z.POPOUT_WINDOW),{clientThemesClassName:d,clientThemesCSS:h}=(0,k.ZP)();return null==n?null:(0,r.jsx)(m.Sle,{children:(0,r.jsx)(P.Gt,{value:a,children:(0,r.jsx)(Q,$(Y({ref:t},e),{guestWindow:n,focused:i,isFullScreen:o,forcedColors:s,connectedEmbeddedActivity:c,clientThemesClassName:d,clientThemesCSS:h,isRefreshEnabled:l}))})})})},254761:function(e,t,n){n.d(t,{Z:()=>o});var i=n(255367);n(73800);var r=n(325767);function o(e){var t,n,{width:o=16,height:l=16,color:s="currentColor",foreground:c}=e,a=function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["width","height","color","foreground"]);return(0,i.jsx)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i})}return e}({},(0,r.Z)(a)),n=n={width:o,height:l,viewBox:"0 0 430 430",children:(0,i.jsx)("path",{className:c,color:s,d:"M187.9,308.1c17.9-13.5,43-13.7,61.1-0.3c1.9,1.3,2.4,4,1.1,5.8s-3.7,2.3-5.6,0.9l-0.3-0.3 c-15.1-11.3-36.3-11.2-51.3,0.1c-0.8,0.5-1.6,0.8-2.4,0.8c-1.2,0-2.4-0.5-3.2-1.6C185.8,312,186.2,309.3,187.9,308.1 M124.4,236 c11.7,0,21.3,9.4,21.3,21.1s-9.4,21.1-21.1,21.1c-11.7,0-21.1-9.4-21.1-21.1C103.1,245.6,112.7,236,124.4,236 M315,236 c11.7,0,21.3,9.4,21.3,21.3c0,11.7-9.4,21.1-21.1,21.1s-21.1-9.4-21.1-21.1C294,245.6,303.5,236,315,236 M347.8,307.2 c2-0.3,4-0.7,6-1.2c2.3-0.5,4.4,0.7,5,2.9c0.7,2.1-0.7,4.4-2.8,5c-2.3,0.7-4.6,1.1-7,1.3c-0.1,0-0.3,0-0.5,0c-2,0-3.7-1.5-4-3.6 C344.1,309.7,345.7,307.6,347.8,307.2 M128.1,87.2l-0.3,0.1c-14.3,5.8-23.6,19.5-23.6,35.1c0,8.5,2.9,16.6,8.5,23.5 c0,0,0,0.1,0.1,0.1l0,0c0.1,0.1,11.3,15.3,31.4,16.9c2.3,0.1,3.9,2.1,3.7,4.4c-0.1,2.1-2,3.7-4,3.7c-0.1,0-0.3,0-0.3,0 c-18.9-1.5-30.8-12.8-35.3-17.8l-4.6,1.7c-0.1,0.1-0.3,0.1-0.5,0.3c-25.6,9.6-42.2,32.1-42.2,57.5c0,10.6,3.1,21.1,8.6,30.4 c0.7,1.1,0.8,2.3,0.4,3.3c-0.3,1.2-1.2,2-2.3,2.5C36.2,263.1,16,293.6,16,327c0,47.6,39.9,86.2,88.9,86.2c32.4,0,68-6.2,106.1-18.5 c3.1-1.3,39.5-16.7,91.1-14.5c2.3,0.1,4,2,3.9,4.3c-0.1,2.3-1.9,4.1-4.3,3.9c-35.6-1.6-64,5.7-78.1,10.4 c26.2,9.6,63.8,14.5,111.7,14.5c43.3,0,78.6-35.2,78.6-78.6c0-20.3-8-39.7-22.1-54.3c-3.2,7.6-10.2,20.2-23.2,28.2 c-0.7,0.4-1.3,0.7-2.1,0.7c-1.3,0-2.7-0.7-3.5-1.9c-1.2-1.9-0.5-4.4,1.3-5.6c16.2-10,21.8-28.7,22.1-29.6 c4.1-17.7,2.4-35.6-4.9-53.3c-4.1-10-10.1-19-17.8-26.8c-1.5-1.6-13.5-11.3-13.5-11.3c-3.6,6.9-12.8,19-33.6,23.6 c-0.3,0-0.5,0.1-0.8,0.1c-1.9,0-3.6-1.3-4-3.2c-0.5-2.3,0.9-4.4,3.1-4.8c23.9-5.2,29.2-21.7,29.6-22.7c3.5-13,2.3-26.4-3.5-39.6 c-8.2-18.9-25.9-32.7-47.4-37.2c-3.5,5.2-12.8,16.1-31.6,20.3c-0.3,0.1-0.7,0.1-0.9,0.1c-1.9,0-3.6-1.3-4-3.2 c-0.5-2.3,0.8-4.4,3.1-4.9c20.2-4.6,27.2-17.7,27.8-18.7c2.8-6.4,2.8-13.7,0.3-21.4c-4.6-14.1-15.9-16.9-31.6-20.9 c-16.9-4.1-37.6-9.3-55.7-31.5c-15.7,10.9-30.8,33.3-29,50.7c1.1,9.8,7.4,16.9,19,20.9c2.1,0.8,3.2,3.1,2.5,5.2 c-0.8,2.1-3.1,3.2-5.2,2.5c-11.8-4.1-18.1-10.5-21.4-17C167,79.1,141.9,80.6,128.1,87.2z"})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n.push.apply(n,i)}return n})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))}}}]);
//# sourceMappingURL=a6d11382327b90a1.js.map