"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["90508"],{456269:function(e,n,t){t.d(n,{AJ:()=>$,Bs:()=>K,ES:()=>Y,Eg:()=>G,IN:()=>J,J$:()=>el,MC:()=>ee,O2:()=>q,Vm:()=>ei,W3:()=>H,XZ:()=>es,eV:()=>W,eZ:()=>ed,iM:()=>z,jR:()=>eo,kF:()=>Q,kn:()=>ea,ku:()=>ec,mX:()=>en,n2:()=>ef,nP:()=>V,ql:()=>eu,r_:()=>et,vP:()=>eg,xw:()=>B}),t(388685),t(583741),t(781311);var r=t(73800),l=t(392711),u=t.n(l),i=t(683860),a=t(442837),o=t(570140),d=t(45114),s=t(493773),c=t(339085),f=t(987170),g=t(905405),Z=t(937889),m=t(739566),h=t(982168),v=t(601070),E=t(344185),p=t(723774),_=t(144140),b=t(91159),C=t(592125),M=t(720202),P=t(430824),O=t(496675),S=t(306680),T=t(594174),A=t(823379),I=t(709054),y=t(883429),w=t(238349),j=t(368844),R=t(660189),N=t(581036),U=t(208970),k=t(882252),F=t(710352),D=t(981631),L=t(176505),x=t(124368);let q=(0,f.Z)({id:"2023-01_forums_non_community",label:"Forum non-community",kind:"guild",defaultConfig:{enabled:!1},treatments:[{id:1,label:"On",config:{enabled:!0}}]});function G(e){return q.getCurrentConfig({guildId:e,location:"553713_2"}).enabled}function H(e){let n=(0,a.e7)([P.Z],()=>P.Z.getGuild(e));return q.useExperiment({guildId:e,location:"553713_1"},{autoTrackExposure:!1}).enabled||!!((null==n?void 0:n.hasFeature(D.oNc.COMMUNITY))||(null==n?void 0:n.hasFeature(D.oNc.INTERNAL_EMPLOYEE_ONLY)))}function Y(e,n,t,l){let u=(0,a.e7)([E.Z],()=>E.Z.hasLoaded(e.guild_id));r.useEffect(()=>{if(!u)return;let r=w.Z.getThreadIds(e.id,n,t,l),i=N.Z.getThreadIdsMissingCounts(e.guild_id,r).filter(e=>(0,k.nU)(e,[S.ZP])).slice(0,180).map(e=>({threadId:e,ackMessageId:S.ZP.getTrackedAckMessageId(e)}));i.length>0&&o.Z.dispatch({type:"REQUEST_FORUM_UNREADS",guildId:e.guild_id,channelId:e.id,threads:i})},[e.id,e.guild_id,u,t,n,l])}function Q(e){return(0,a.e7)([E.Z,C.Z],()=>{let n=u()(E.Z.getThreadsForParent(e.guild_id,e.parent_id)).keys().filter(e=>{var n;return(null==(n=C.Z.getChannel(e))?void 0:n.hasFlag(L.zZ.PINNED))===!0}).head();return C.Z.getChannel(n)})}let X=[];function W(e){let n=function(e){let n=null==e?void 0:e.parent_id;return(0,a.cj)([C.Z],()=>{var e;let t=C.Z.getChannel(n);return(null!=(e=null==t?void 0:t.availableTags)?e:[]).reduce((e,n)=>{var t,r;return t=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){var r;r=t[n],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return e}({},e),r=r={[n.id]:n},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t},{})},[n])}(e);return r.useMemo(()=>{var t,r,l;let u=null!=(l=null==e||null==(r=e.appliedTags)||null==(t=r.map(e=>n[e]))?void 0:t.filter(A.lm))?l:X;return(null==e?void 0:e.isModeratorReportChannel())?(0,h.iq)(u):u},[n,e])}function z(e,n){let t=(0,a.Wu)([T.default],()=>n.map(e=>T.default.getUser(e)).filter(A.lm));return(0,s.ZP)(()=>{t.forEach(n=>{M.Z.requestMember(e.guild_id,n.id)})}),t}function B(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.R6.DURATION_AGO,l=r.useMemo(()=>I.default.extractTimestamp(e.id),[e.id]),u=(0,b.Ok)(e),a=r.useMemo(()=>(0,k.Uw)(n,t),[n,t]);return r.useMemo(()=>n===i.z.CREATION_DATE?(0,b.Ye)(l,a):(0,b.Ye)(u,a),[u,n,l,a])}function J(e){return r.useMemo(()=>{var n;return u().maxBy(null!=(n=null==e?void 0:e.reactions)?n:[],e=>Math.max(e.burst_count,e.count))},[null==e?void 0:e.reactions])}function K(e){let n=null==e?void 0:e.defaultReactionEmoji,t=(0,a.e7)([c.ZP],()=>(null==n?void 0:n.emojiId)!=null?c.ZP.getUsableCustomEmojiById(n.emojiId):null);return null==n?null:null!=n.emojiId&&null!=t?{id:n.emojiId,name:t.name,animated:t.animated}:null!=n.emojiName?{id:n.emojiId,name:n.emojiName,animated:!1}:null}function V(e){let n=(0,a.e7)([_.Z],()=>{var n;return null!=(n=_.Z.getCount(e.id))?n:0}),t=(0,p.lE)(n,e.id),r=(0,a.e7)([S.ZP],()=>(0,k.nU)(e.id,[S.ZP])),l=(0,a.e7)([N.Z],()=>{if(!r)return null;let t=N.Z.getCount(e.id);if(null==t||!(t>0))return"1+";{let e=Math.min(t,n);return e>=x.dg?"".concat(x.dg,"+"):e}});return{messageCount:n,isMaxMessageCount:null!=n&&"".concat(n)!==t,messageCountText:t,unreadCount:l}}function $(e){var n;let t=(0,a.e7)([T.default],()=>T.default.getUser(e.ownerId)),l=(0,a.e7)([R.Z],()=>{var n;return null==(n=R.Z.getMessage(e.id))?void 0:n.firstMessage}),u=(0,m.Sw)(null!=(n=null==l?void 0:l.author)?n:t,e);return r.useEffect(()=>{null!=e.ownerId&&M.Z.requestMember(e.guild_id,e.ownerId)},[e.guild_id,e.ownerId]),{user:t,author:u}}function ee(e){var n,t;let r=T.default.getUser(e.ownerId),l=null==(n=R.Z.getMessage(e.id))?void 0:n.firstMessage,u=(0,m.ij)(null!=(t=null==l?void 0:l.author)?t:r,e);return{user:r,author:u}}function en(e){let{firstMessage:n,formatInline:t=!0,noStyleAndInteraction:l=!0}=e,u=(0,g.p)(),{hasSpoilerEmbeds:i,content:a}=r.useMemo(()=>(null==n?void 0:n.content)!=null&&""!==n.content?(0,Z.ZP)(n,{formatInline:t,noStyleAndInteraction:l,allowHeading:!0,allowList:!0,shouldFilterKeywords:u}):{hasSpoilerEmbeds:!1,content:null},[n,t,l,u]),o=(0,j.eL)(n,i),d=(0,j.vg)(n,i);return{hasSpoilerEmbeds:i,content:a,firstMedia:o,firstMediaIsEmbed:d}}function et(e){return(0,a.e7)([O.Z],()=>O.Z.can(D.Plq.MANAGE_CHANNELS,e))}let er={isNew:!1,hasUnreads:!1};function el(e){return(0,a.cj)([P.Z,S.ZP],()=>{var n;let t=P.Z.getGuild(null!=(n=e.getGuildId())?n:D.lds);return null==t?er:(0,k.FS)(e,t,[S.ZP])})}function eu(e){return r.useMemo(()=>null==e||null==e.template?"":e.template.trim(),[e])}function ei(e){let n=(0,a.e7)([O.Z],()=>O.Z.can(D.Plq.MANAGE_THREADS,e));return r.useMemo(()=>{var t;let r=[...null!=(t=null==e?void 0:e.availableTags)?t:[]];return n||(r=r.filter(e=>!e.moderated)),r},[n,null==e?void 0:e.availableTags])}function ea(e,n){let t=ei((0,a.e7)([C.Z],()=>C.Z.getChannel(null==e?void 0:e.parent_id),[e]));return r.useMemo(()=>{let r=n.filter(e=>t.includes(e));return(null==e?void 0:e.isModeratorReportChannel())?(0,h.iq)(r):r},[n,t,e])}function eo(e){return(0,a.e7)([O.Z],()=>O.Z.can(D.Plq.READ_MESSAGE_HISTORY,e))}function ed(e){return(0,a.e7)([O.Z],()=>O.Z.can(D.Plq.READ_MESSAGE_HISTORY,e))}function es(e){let{channelId:n}=e;return(0,a.cj)([U.Z],()=>({isSearchLoading:U.Z.getSearchLoading(n),searchQuery:U.Z.getSearchQuery(n),searchResults:U.Z.getSearchResults(n)}))}function ec(e,n,t){let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{isSearchLoading:u,searchQuery:i}=es({channelId:e.id}),a=eo(e),o=r.useRef(null),d=r.useRef(new Set);r.useEffect(()=>{if(null==i&&null!=o.current){y.Z.clearForumSearch(e.id),o.current=null;return}if(null==i||0===i.length||l)return;if(!a)return void y.Z.clearForumSearch(e.id);if(o.current===i&&d.current===n||u)return;let r=setTimeout(async()=>{o.current=i,d.current=n;try{await y.Z.searchForumPosts(e.guild_id,e.id,i,n,t)}catch(e){}},350);return()=>clearTimeout(r)},[a,e.guild_id,e.id,l,u,i,n,t])}function ef(e,n){return(0,a.e7)([v.Z,S.ZP,C.Z],()=>{let t=C.Z.getChannel(n);if(!(null==t?void 0:t.isForumLikeChannel()))return 0;let r=v.Z.getActiveJoinedUnreadThreadsForParent(e,n),l=v.Z.getActiveUnjoinedUnreadThreadsForParent(e,n),u=S.ZP.ackMessageId(n),i=0;if(null==u)return i;for(let e in r){let n=r[e],t=S.ZP.lastMessageId(n.channel.id);null!=t&&t>u&&i++}for(let e in l){let n=l[e],t=S.ZP.lastMessageId(n.id);null!=t&&t>u&&i++}return i})}function eg(e){let{channel:n,sortOrder:t,tagFilter:l,tagSetting:u,shouldAutomaticallyAck:i}=e,o=(0,a.Wu)([w.Z],()=>w.Z.getThreadIds(n.id,t,l,u)),s=ef(n.guild_id,n.id),c=(0,a.e7)([w.Z],()=>i&&(s>0||w.Z.getCanAckThreads()),[i,s]);return r.useEffect(()=>{c&&(0,d.U6)(n,{object:D.qAy.ACK_FORUM_ACTIVE_THREADS,objectType:D.Qqv.ACK_AUTOMATIC})},[n,c]),o}},581036:function(e,n,t){t.d(n,{Z:()=>h}),t(388685);var r,l,u,i=t(512722),a=t.n(i),o=t(442837),d=t(570140),s=t(344185),c=t(592125),f=t(306680);let g={},Z=new Set;class m extends(r=o.ZP.Store){initialize(){this.waitFor(s.Z,c.Z,f.ZP)}getCount(e){return g[e]}getThreadIdsMissingCounts(e,n){return a()(s.Z.hasLoaded(e),"must wait for THREAD_LIST_SYNC before calling this"),n.filter(e=>!(e in g)&&!Z.has(e))}}u="ForumPostUnreadCountStore",(l="displayName")in m?Object.defineProperty(m,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):m[l]=u;let h=new m(d.Z,{CONNECTION_OPEN:function(){g={},Z=new Set},THREAD_CREATE:function(e){let{channel:n,isNewlyCreated:t}=e;if(!t||!s.Z.hasLoaded(n.guild_id))return!1;g[n.id]=0},MESSAGE_CREATE:function(e){let{channelId:n,optimistic:t,isPushNotification:r}=e;if(t||r||!(n in g))return!1;g[n]++},FORUM_UNREADS:function(e){let{threads:n}=e;n.forEach(e=>{null!=e.count&&(g[e.threadId]=e.count)})},MESSAGE_ACK:function(e){let{channelId:n}=e;if(!(n in g)){let e=c.Z.getChannel(n),t=c.Z.getChannel(null==e?void 0:e.parent_id);if(!(null==t?void 0:t.isForumLikeChannel()))return!1}g[n]=f.ZP.getUnreadCount(n)},REQUEST_FORUM_UNREADS:function(e){let{threads:n}=e;n.forEach(e=>{let{threadId:n}=e;return Z.add(n)})}})},712950:function(e,n,t){t.d(n,{g:()=>i,p:()=>a});var r=t(399606),l=t(581883),u=t(592204);let i=()=>{var e,n,t;let u=(0,r.cj)([l.Z],()=>{var e,n;return null!=(n=null==(e=l.Z.settings.textAndImages)?void 0:e.keywordFilterSettings)?n:{}});return{profanity:null==(e=u.profanity)?void 0:e.value,sexualContent:null==(n=u.sexualContent)?void 0:n.value,slurs:null==(t=u.slurs)?void 0:t.value}},a=()=>{var e;let{profanity:n,sexualContent:t,slurs:r}=i();return!!(0,u.Xo)({location:"use-should-filter-keywords"})&&null!=(e=n||t||r)&&e}},905405:function(e,n,t){t.d(n,{p:()=>u});var r=t(592204),l=t(712950);let u=()=>{var e;let{profanity:n,sexualContent:t,slurs:u}=(0,l.g)();return!!(0,r.Xo)({location:"use-should-filter-keywords"})&&null!=(e=n||t||u)&&e}},723774:function(e,n,t){t.d(n,{WE:()=>d,lE:()=>a});var r=t(709054),l=t(124368),u=t(388032);let i=e=>r.default.compare("992549565104128000",e)>-1,a=(e,n)=>{if(null==e||e<0)return"0";{let t=i(n);return(null==n||t)&&e>=l.vw?"50+":e>=l.M3?"100k+":"".concat(e)}},o=(e,n,t)=>{let r=a(e,t);return"0"===r?u.intl.string(u.t.eXHkho):u.intl.formatToPlainString(n,{count:r})},d=(e,n)=>o(e,u.t.rfAXDQ,n)}}]);
//# sourceMappingURL=a38d8c5827bc809b.js.map