"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["30419"],{623714:function(e){e.exports="/assets/52c92d8492ebe041.svg"},267988:function(e){e.exports="/assets/52c92d8492ebe041.svg"},396767:function(e){e.exports="/assets/c278e895ac47b4af.svg"},987656:function(e){e.exports="/assets/2d416896e0bbb412.svg"},395199:function(e,t,l){l.d(t,{Z:()=>N}),l(539854),l(388685);var n,r=l(255367),s=l(73800),i=l(120356),o=l.n(i),a=l(442837),c=l(215569),d=l(481060),u=l(600164),m=l(777789),x=l(78839),h=l(709054),p=l(388032),g=l(304586);function f(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}class j extends s.PureComponent{render(){let{onClose:e}=this.props;return(0,r.jsxs)(d.xBx,{separator:!1,justify:u.Z.Justify.BETWEEN,children:[(0,r.jsx)(d.X6q,{variant:"heading-md/semibold",children:this.props.text}),null!=e?(0,r.jsx)(d.olH,{onClick:e}):null]})}}function C(e){let{imageClass:t,children:l,error:n,onDismissError:s}=e;return(0,r.jsxs)("div",{className:g.content,children:[(0,r.jsx)("div",{className:o()(g.image,t)}),l,(0,r.jsx)(c.W,{children:null!=n?(0,r.jsx)(d.oXn,{className:g.error,children:(0,r.jsx)(d.kzN,{onDismiss:s,children:n.message})}):null})]})}let v=e=>{let{canceledCount:t}=e,l=(0,a.e7)([x.ZP],()=>x.ZP.getPremiumTypeSubscription());return null==l?null:(0,r.jsxs)("div",{className:g.pendingCancellation,children:[(0,r.jsx)(d.P4T,{size:"custom",width:20,height:20,color:"currentColor",className:g.pendingCancellationIcon}),(0,r.jsx)(d.Text,{variant:"text-md/normal",className:g.pendingCancellationMessage,children:p.intl.format(p.t.SFpsCA,{date:l.currentPeriodEnd,canceledCount:t})})]})};function b(e){let{imageClass:t,blurb:l,guild:n,warning:s,error:i,onDismissError:o,slotCount:a=1,canceledCount:c=0}=e;return(0,r.jsxs)(C,{imageClass:t,error:i,onDismissError:o,children:[(0,r.jsx)(d.Text,{variant:"text-md/normal",children:l}),(0,r.jsx)(m.Z,{className:g.guildCard,guild:n,subscriptionChange:a}),(0,r.jsx)(d.Text,{variant:"text-md/normal",children:s}),c>0?(0,r.jsx)(v,{canceledCount:c}):null]})}class y extends s.PureComponent{render(){let{confirmation:e,confirmationLabel:t,isModifyingSubscription:l,onConfirm:n,onCancel:s}=this.props;return(0,r.jsxs)(d.mzw,{children:[(0,r.jsx)(d.zxk,{onClick:n,submitting:l,"aria-label":t,children:e}),(0,r.jsx)(d.zxk,{look:d.zxk.Looks.LINK,color:d.zxk.Colors.PRIMARY,onClick:s,disabled:l,children:p.intl.string(p.t["ETE/oK"])})]})}}class S extends(n=s.PureComponent){render(){let{guild:e,header:t,blurb:l,warning:n,confirmation:i,confirmationLabel:o,imageClass:a,error:c,isModifyingSubscription:u,onConfirm:m,onCancel:x,onDismissError:h,canceledCount:p}=this.props;return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(j,{text:t}),(0,r.jsx)(d.hzk,{children:(0,r.jsx)(b,{guild:e,blurb:l,warning:n,imageClass:a,error:c,onDismissError:h,canceledCount:p})}),(0,r.jsx)(y,{confirmation:i,confirmationLabel:o,isModifyingSubscription:u,onConfirm:m,onCancel:x})]})}}f(S,"Header",j),f(S,"ApplyBody",b),f(S,"TransferBody",function(e){var t,l;let{imageClass:n,blurb:i,fromGuilds:o,toGuild:a,error:c,onDismissError:u,slotCount:x=1,canceledCount:f=0}=e,j=s.useRef(o),b=null==(t=j.current)?void 0:t.length,y=null==(l=j.current)?void 0:l.reduce((e,t)=>(e.hasOwnProperty(t.id)||(e[t.id]=[]),e[t.id].push(t),e),{});return(0,r.jsxs)(C,{imageClass:n,error:c,onDismissError:u,children:[(0,r.jsx)(d.Text,{variant:"text-md/normal",children:i}),(0,r.jsx)(d.Text,{variant:"text-xs/bold",className:g.transferGuildCardHeader,children:p.intl.format(p.t["5zQYEx"],{guildCount:b})}),null!=y?h.default.keys(y).map(e=>(0,r.jsx)(m.Z,{className:g.transferFromGuildCard,guild:y[e][0],subscriptionChange:-1*y[e].length},e)):null,(0,r.jsx)(d.Text,{variant:"text-xs/normal",className:g.transferGuildCardHeader,children:p.intl.format(p.t.ct6oxM,{slotCount:x})}),(0,r.jsx)("div",{className:g.activeTransferGuildCardBorder,children:(0,r.jsx)(m.Z,{className:g.transferToGuildCard,guild:a,subscriptionChange:null!=o?o.length:1})}),f>0?(0,r.jsx)(v,{canceledCount:f}):null]})}),f(S,"Footer",y);let N=S},760558:function(e,t,l){l.d(t,{default:()=>b}),l(388685);var n=l(255367),r=l(73800),s=l(512722),i=l.n(s),o=l(442837),a=l(481060),c=l(179360),d=l(899667),u=l(430824),m=l(314884),x=l(626135),h=l(267642),p=l(395199),g=l(719228),f=l(4434),j=l(981631),C=l(388032),v=l(671593);let b=e=>{var t,l;let{guildBoostSlots:s,selectedGuild:b,locationSection:y,transitionState:S,onClose:N}=e,P=(0,h.vx)(m.Z.boostSlots);i()(null!=s||null!=b,"Must either provide slots or an initial selected guild"),i()(!(null==s?void 0:s.some(e=>e.isOnCooldown())),"If slots are provided, they must not be on cooldown");let O=[null==s?"UNUSED_QUANTITY_SELECT":null,null==b?"GUILD_SELECT":null,"CONFIRM","SUCCESS"].filter(e=>null!=e),[E,T]=(0,o.Wu)([d.Z],()=>[d.Z.isModifyingAppliedBoost,d.Z.applyBoostError]),[L,Z]=r.useState(""),[w,I]=r.useState(O[0]),[k,M]=r.useState(!1),[G,D]=r.useState(b),[U,z]=r.useState(null!=s?s:P.slice(0,1)),B=r.useMemo(()=>null==U?[]:U.map(e=>{let{premiumGuildSubscription:t}=e;return u.Z.getGuild(null==t?void 0:t.guildId)}).filter(e=>null!=e),[U]),R=r.useMemo(()=>{var e;return(null==U||null==(e=U[0])?void 0:e.premiumGuildSubscription)!=null},[U]),F=()=>{N("SUCCESS"===w),x.default.track(j.rMx.MODAL_DISMISSED,{type:j.jXE.PREMIUM_GUILD_SUBSCRIBE_MODAL,location_section:y})},_={UNUSED_QUANTITY_SELECT:{body:()=>(i()(null!=s||0!==P.length,"Cannot provide no slots if there are no other available slots"),(0,n.jsxs)("div",{className:v.quantitySelectorBody,children:[(0,n.jsx)(a.X6q,{variant:"heading-md/semibold",className:v.quantitySelectorHeader,children:C.intl.string(C.t["9FFrra"])}),(0,n.jsx)(a.Text,{variant:"text-md/normal",className:v.quantitySelectorDescription,children:C.intl.string(C.t.x5qw5e)}),(0,n.jsxs)("div",{className:v.quantitySelectorWrapper,children:[(0,n.jsx)(a.FiK,{value:U.length,onChange:e=>z(P.slice(0,e)),minValue:1,maxValue:P.length}),(0,n.jsx)(a.Text,{className:v.quantitySelectorLabel,variant:"text-md/normal",children:C.intl.string(C.t.Vl8TCw)})]})]})),footer:()=>(0,n.jsxs)(a.mzw,{children:[(0,n.jsx)(a.zxk,{onClick:()=>I("CONFIRM"),children:C.intl.string(C.t["/uwYdX"])}),(0,n.jsx)(a.zxk,{look:a.zxk.Looks.LINK,color:a.zxk.Colors.PRIMARY,onClick:F,children:C.intl.string(C.t["1BPTsL"])})]})},GUILD_SELECT:{header:()=>(0,n.jsx)(g.g,{isTransfer:R,query:L,setQuery:Z}),bodyClass:v.selectContent,body:()=>(0,n.jsx)(g.e,{onClose:F,onSelectGuild:e=>{D(e),I("CONFIRM")},isTransfer:R,selectedSlotGuilds:B,query:L})},CONFIRM:{body(){if(null==G)return null;let e=U.filter(e=>(0,h.tl)(e)).length,t=U.length,l=B.length;return R?(0,n.jsx)(p.Z.TransferBody,{fromGuilds:B,toGuild:G,blurb:C.intl.formatToPlainString(C.t.SSA2lp,{slotCount:t,guildCount:l}),imageClass:v.transferConfirmImage,error:k?T:null,onDismissError:()=>M(!1),slotCount:t,canceledCount:e}):(0,n.jsx)(p.Z.ApplyBody,{guild:G,blurb:C.intl.string(C.t.yTlZV1),warning:C.intl.formatToPlainString(C.t.KPnDlp,{days:j.o3l,slotCount:t}),imageClass:v.confirmImage,error:k?T:null,onDismissError:()=>M(!1),slotCount:t,canceledCount:e})},footer(){let e=U.length,t="CONFIRM"===O[0]?F:()=>I(O[O.indexOf(w)-1]),l=async()=>{if(null!=G&&(null==U?void 0:U.length)!==0){i()(!U.some(e=>e.isOnCooldown()),"Cannot use a premium guild subscription slot while on cooldown");try{await Promise.all(U.map(e=>{let{premiumGuildSubscription:t}=e;return null!=t?(0,c.dG)(t.guildId,t.id):Promise.resolve()})),await (0,c.W3)(G.id,U.map(e=>{let{id:t}=e;return t})),I("SUCCESS")}catch(e){M(!0)}}};return(0,n.jsx)(p.Z.Footer,{confirmation:R?C.intl.formatToPlainString(C.t.Oh6mxc,{slotCount:e}):C.intl.formatToPlainString(C.t["ZU5x5+"],{slotCount:e}),confirmationLabel:R?C.intl.formatToPlainString(C.t.fnZRmZ,{slotCount:e}):C.intl.formatToPlainString(C.t.d0vwWV,{slotCount:e}),onConfirm:l,onCancel:t,isModifyingSubscription:E})}},SUCCESS:{body:()=>(0,n.jsx)(f.R7,{guild:G,isTransfer:R,guildBoostQuantity:U.length,onClose:F,didPurchaseOnFractionalPremium:!1})}};r.useEffect(()=>{x.default.track(j.rMx.OPEN_MODAL,{type:j.jXE.PREMIUM_GUILD_SUBSCRIBE_MODAL,location_section:y})},[y]);let A=_[w];return(0,n.jsxs)(a.Y0X,{transitionState:S,className:v.modal,size:a.CgR.SMALL,parentComponent:"ApplyGuildBoostModal",children:[null==(t=A.header)?void 0:t.call(A),(0,n.jsx)(a.hzk,{className:A.bodyClass,children:(0,n.jsx)(a.qBt,{step:w,steps:O,children:A.body()})}),null==(l=A.footer)?void 0:l.call(A),(0,n.jsx)(a.olH,{className:v.modalCloseButton,onClick:F})]})}},719228:function(e,t,l){l.d(t,{default:()=>v,e:()=>C,g:()=>j}),l(539854),l(388685);var n=l(255367),r=l(73800),s=l(658722),i=l.n(s),o=l(442837),a=l(481060),c=l(37234),d=l(565138),u=l(703656),m=l(430824),x=l(771845),h=l(267642),p=l(981631),g=l(388032),f=l(544197);function j(e){let{isTransfer:t=!1,setQuery:l,query:r}=e;return(0,n.jsxs)(a.xBx,{className:f.selectHeaderContainer,children:[(0,n.jsx)(a.X6q,{className:f.selectHeader,variant:"heading-md/semibold",children:t?g.intl.string(g.t.IB13DQ):g.intl.string(g.t.cQYceX)}),(0,n.jsx)(a.E1j,{size:a.E1j.Sizes.MEDIUM,placeholder:g.intl.string(g.t.vf3ZTU),"aria-label":g.intl.string(g.t.vf3ZTU),className:f.selectSearch,query:r,onChange:l,onClear:()=>l("")})]})}function C(e){let{isTransfer:t=!1,selectedSlotGuilds:l,onClose:r,onSelectGuild:s,query:j}=e,C=(0,o.e7)([x.ZP],()=>x.ZP.getFlattenedGuildIds()),v=(0,o.Wu)([m.Z],()=>C.reduce((e,t)=>{let n=m.Z.getGuild(t);return null==n||null!=l&&l.some(e=>e.id===t)||(j.length<=0||i()(j.toLowerCase(),null==n?void 0:n.name.toLowerCase()))&&e.push(n),e},[]));function b(){r(),(0,c.xf)(),(0,u.uL)(p.Z5c.GUILD_DISCOVERY)}return(0,n.jsxs)(n.Fragment,{children:[0===v.length&&(0,n.jsx)("div",{className:f.emptyStateWrapper,children:(0,n.jsx)(a.Text,{variant:"text-md/normal",children:0===C.length?g.intl.format(g.t["E3tB6+"],{publicGuildDirectoryHook:(e,t)=>(0,n.jsx)(a.P3F,{onClick:b,tag:"a",children:e},t)}):g.intl.string(g.t.w3GLl5)})}),v.map(e=>(0,n.jsxs)(a.P3F,{className:f.selectGuild,onClick:()=>{s(e)},children:[(0,n.jsx)(d.Z,{className:f.selectGuildIcon,guild:e,size:d.Z.Sizes.SMALL}),(0,n.jsxs)("div",{className:f.selectGuildCopy,children:[(0,n.jsx)(a.Text,{className:f.selectGuildName,variant:"text-md/normal",children:e.name}),(0,n.jsx)(a.Text,{className:f.selectGuildLevel,color:"text-muted",variant:"text-xs/normal",children:(0,h.nW)(e.premiumTier)})]}),(0,n.jsx)(a.Text,{className:f.selectGuildPseudoCta,color:"always-white",variant:"text-sm/medium",children:t?g.intl.string(g.t.dUgaFx):g.intl.string(g.t.Uj0md3)})]},e.id))]})}function v(e){let{onClose:t,onSelectGuild:l,transitionState:s}=e,[i,o]=r.useState("");return(0,n.jsxs)(a.Y0X,{transitionState:s,className:f.modal,size:a.CgR.SMALL,parentComponent:"GuildSelectModal",children:[(0,n.jsx)(j,{query:i,setQuery:o}),(0,n.jsx)(a.hzk,{className:f.modalContent,children:(0,n.jsx)(C,{onClose:t,onSelectGuild:l,query:i})}),(0,n.jsx)(a.olH,{className:f.modalCloseButton,onClick:t})]})}},777789:function(e,t,l){l.d(t,{Z:()=>C});var n=l(255367),r=l(73800),s=l(120356),i=l.n(s),o=l(442837),a=l(565138),c=l(297700),d=l(471885),u=l(424625),m=l(267642),x=l(713081),h=l(905128),p=l(151494),g=l(632149);class f extends r.PureComponent{render(){let{tier:e}=this.props;return(0,n.jsxs)("div",{className:g.tierPill,children:[(0,n.jsx)(c.Z,{className:g.tierPillStar,children:(0,n.jsx)(d.Z,{tier:e,color:"currentColor",className:g.tierPillGem})}),(0,m.nW)(e)]})}}let j=e=>{let{subscriptionChange:t,guild:l}=e,r=(0,p.Z)(l.id);if(0===t)return null;let s=(0,m.Jh)(l.id),i=(0,m.ee)(r+t),o=i-s;return 0===o?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{className:o>0?g.levelUpIcon:g.levelDownIcon}),(0,n.jsx)(f,{tier:i})]})};function C(e){let{guild:t,className:l,subscriptionChange:s}=e,c=(0,o.e7)([h.Z],()=>null!=h.Z.getStateForGuild(t.id));return r.useEffect(()=>{c||(0,x.Fm)(t.id)},[c,t.id]),(0,n.jsxs)("div",{className:i()(g.subscription,l),children:[(0,n.jsx)(a.Z,{guild:t,size:a.Z.Sizes.LARGE}),(0,n.jsxs)("div",{className:g.subscriptionInfo,children:[(0,n.jsx)("div",{className:g.guildName,children:t.name}),(0,n.jsxs)("div",{className:g.tierInfo,children:[(0,n.jsx)(f,{tier:t.premiumTier}),(0,n.jsx)(j,{guild:t,subscriptionChange:null!=s?s:0})]})]})]})}},424625:function(e,t,l){l.d(t,{Z:()=>s});var n=l(255367);l(73800);var r=l(325767);function s(e){var t,l,{width:s=24,height:i=24,color:o="currentColor"}=e,a=function(e,t){if(null==e)return{};var l,n,r=function(e,t){if(null==e)return{};var l,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)l=s[n],t.indexOf(l)>=0||(r[l]=e[l]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)l=s[n],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(r[l]=e[l])}return r}(e,["width","height","color"]);return(0,n.jsxs)("svg",(t=function(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{},n=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(l).filter(function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable}))),n.forEach(function(t){var n;n=l[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},(0,r.Z)(a)),l=l={width:s,height:i,viewBox:"0 0 16 16",children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.45329 8.53891L3.26217 13.7844C2.95995 14.0719 2.49772 14.0719 2.21328 13.7844C1.92883 13.497 1.92883 13.0299 2.21328 12.7245L6.88884 7.99999L2.21328 3.27543C1.92883 2.988 1.92883 2.50297 2.21328 2.21555C2.49772 1.92812 2.95995 1.92812 3.26217 2.21555L8.45329 7.47903C8.73774 7.76645 8.73774 8.23352 8.45329 8.53891Z",fill:o}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4533 8.53891L9.26217 13.7844C8.95995 14.0719 8.49772 14.0719 8.21328 13.7844C7.92883 13.497 7.92883 13.0299 8.21328 12.7245L12.8888 7.99999L8.21328 3.27543C7.92883 2.988 7.92883 2.50297 8.21328 2.21555C8.49772 1.92812 8.95995 1.92812 9.26217 2.21555L14.4533 7.47903C14.7377 7.76645 14.7377 8.23352 14.4533 8.53891Z",fill:o})]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):(function(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);l.push.apply(l,n)}return l})(Object(l)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))}),t))}}}]);
//# sourceMappingURL=451a330518ebbb6c.js.map