"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["40814"],{102469:function(e){e.exports="/assets/a90b040155ee449f.svg"},312438:function(e){e.exports="/assets/ed4c6d51411aad5e.svg"},761781:function(e,t,n){n.d(t,{Z:()=>f}),n(388685);var r,l,i,o=n(442837),a=n(570140),s=n(890022);let c=new Set;function u(e){let{userActivities:t}=e;(0,s.uw)("RecentUserActivityStore")&&null!=t&&(c=new Set(t.map(e=>e.application_id)))}class d extends(r=o.ZP.Store){get currentUserApplicationIds(){return c}}i="RecentUserActivityStore",(l="displayName")in d?Object.defineProperty(d,l,{value:i,enumerable:!0,configurable:!0,writable:!0}):d[l]=i;let f=new d(a.Z,{CONNECTION_OPEN_SUPPLEMENTAL:u,CONNECTION_OPEN_STATE_UPDATE:u})},890022:function(e,t,n){n.d(t,{W7:()=>a,_x:()=>c,uw:()=>s});var r=n(818083),l=n(752048),i=n(699516);let o=(0,r.B)({kind:"user",id:"2025-04_game_activity_notification",label:"Game Activity Notifications",defaultConfig:{fromUserType:2},treatments:[{id:1,label:"Show Notifications from Friends Only",config:{fromUserType:0}},{id:2,label:"Show Notifications from Friends and High Affinity Users",config:{fromUserType:1}}]});function a(e){switch(o.getCurrentConfig({location:"filterPresences"}).fromUserType){case 2:return[];case 0:return e.filter(e=>{let{user:t}=e;return i.Z.isFriend(t.id)});case 1:return e.filter(e=>{let{user:t}=e;return i.Z.isFriend(t.id)||l.Z.isHighlyAffinedVCUser(t.id)});default:return e}}function s(e){return 2!==o.getCurrentConfig({location:e}).fromUserType}function c(e){return 2!==o.useExperiment({location:e}).fromUserType}},688907:function(e,t,n){n.d(t,{BH:()=>a,MH:()=>s});var r=n(442837),l=n(524437),i=n(761781),o=n(695346);function a(){return c(o.YT.useSetting(),(0,r.e7)([i.Z],()=>i.Z.currentUserApplicationIds.size>0))}function s(){return c(o.YT.getSetting(),i.Z.currentUserApplicationIds.size>0)}function c(e,t){return e===l.Tv.ACTIVITY_NOTIFICATIONS_UNSET?t?l.Tv.ONLY_GAMES_PLAYED:l.Tv.ACTIVITY_NOTIFICATIONS_ENABLED:e!==l.Tv.ONLY_GAMES_PLAYED||t?e:l.Tv.ACTIVITY_NOTIFICATIONS_ENABLED}},537413:function(e,t,n){n.d(t,{Z:()=>i}),n(388685);var r=n(451467),l=n(37113);function i(e,t,n){for(let i of l.no[e])if((0,r.Z)(e,i.resolution,i.fps,t,n))return[i.resolution,i.fps];return null}},143135:function(e,t,n){n.d(t,{Z:()=>l});var r=n(855403);function l(e,t,n){return null==t?e:n.find(e=>(0,r.Z)(t.id,e.windowHandle))}},562224:function(e,t,n){n.d(t,{Z:()=>m}),n(388685);var r=n(268146),l=n(872810),i=n(594190),o=n(751571),a=n(695346),s=n(361291),c=n(592125),u=n(430824),d=n(131951),f=n(944486),h=n(594174),p=n(358085),g=n(451467),y=n(537413),O=n(143135),b=n(37113),N=n(761274);async function m(e,t){var n,m,v,x,E,C,I,T,j,S;let P=h.default.getCurrentUser(),_=f.Z.getVoiceChannelId(),Z=c.Z.getChannel(_),A=null==Z?void 0:Z.getGuildId(),w=null==(n=u.Z.getGuild(A))?void 0:n.premiumTier;if(null==P||null==Z||null==_)return[!1,"no user or channel"];let R=null;if(null==(R="number"==typeof e?i.ZP.getGameForPID(e):e))return[!1,"no source"];if(!d.Z.getUseSystemScreensharePicker()&&!await o.Z.hasPermission(N.Eu.SCREEN_RECORDING,{showAuthorizationError:!1}))return[!1,"no permission"];let{preset:D,resolution:U,fps:k,soundshareEnabled:M}=s.Z.getState(),L=null!=(v=null==t?void 0:t.preset)?v:D,[B,G]=null!=(x=(0,y.Z)(L,P,w))?x:[],V=null!=(E=null!=B?B:null==t?void 0:t.resolution)?E:U,F=null!=(C=null!=G?G:null==t?void 0:t.fps)?C:k,W=null!=(I=null==t?void 0:t.previewDisabled)?I:a.I0.getSetting(),Y=null!=(T=null==t?void 0:t.soundshareEnabled)?T:M;return(0,g.Z)(L,V,F,P,w,Z)||(L=b.tI.PRESET_VIDEO,V=b.LY.RESOLUTION_720,F=b.ws.FPS_30),(0,l.Rc)({preset:L,resolution:V,frameRate:F,soundshareEnabled:Y}),(0,l.WH)(A,_,(j=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},function(e){if(e.hasOwnProperty("pid"))return{pid:e.pid};let t=(0,O.Z)(void 0,e,i.ZP.getRunningGames()),n=!(0,p.isWindows)()||null==t||(null==e?void 0:e.id.startsWith(r.vA.CAMERA))||null==t?null:t.pid;return null!=n?{pid:n}:{sourceId:e.id,sourceName:e.name,sourceIcon:e.icon}}(R)),S=S={audioSourceId:(null==(m=R.id)?void 0:m.startsWith(r.vA.CAMERA))?null==t?void 0:t.audioSourceId:void 0,sound:Y,previewDisabled:W,goLiveModalDurationMs:null==t?void 0:t.goLiveModalDurationMs},Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(S)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(S)).forEach(function(e){Object.defineProperty(j,e,Object.getOwnPropertyDescriptor(S,e))}),j)),[!0,void 0]}},656063:function(e,t,n){n.d(t,{Z:()=>c});var r=n(503438),l=n(802856),i=n(420660),o=n(789407),a=n(630186),s=n(250889);function c(e){return(0,l.Z)(e)?s.H+e.name:(0,r.Z)(e)&&null!=e.party&&null!=e.party.id?o.r9.id:(0,i.Z)(e)&&null!=e.url?a._+e.url:null!=e.application_id?e.application_id:null}},761282:function(e,t,n){n.d(t,{JE:()=>u,ct:()=>c,dc:()=>s});var r=n(255367);n(73800);var l=n(261600),i=n(157925),o=n(147049);let a={[i.gD]:new l.U};function s(e){var t;let n=e.application_id;if(null==n)return;let r=a[n];if(null!=r&&(null==(t=r.shouldShow)?void 0:t.call(r,e))!==!1)return r.createHeader(e)}function c(e){var t;let n=e.application_id;if(null==n)return;let l=a[n];if((null==l?void 0:l.body)!=null&&(null==(t=l.shouldShow)?void 0:t.call(l,e))!==!1){let t=l.body;return(0,r.jsx)("section",{className:o.section,children:(0,r.jsx)(t,{activity:e})},"delegate-".concat(n))}}function u(e){var t;let n=e.application_id;if(null==n)return!0;let r=a[n];return null==r||(null==(t=r.shouldShow)?void 0:t.call(r,e))!==!1}},106371:function(e,t,n){n.d(t,{Z:()=>r});let r=(0,n(818083).B)({kind:"user",id:"2024-08_reaction_push_notifications_user",label:"In App Notifications for Reactions",defaultConfig:{enableInAppNotifications:!1,enableNotificationsForAllReactions:!1},treatments:[{id:1,label:"Enable In App Notifications for Reactions (First Reaction)",config:{enableInAppNotifications:!0,enableNotificationsForAllReactions:!1}},{id:2,label:"Enable In App Notifications for Reactions (All Reactions)",config:{enableInAppNotifications:!0,enableNotificationsForAllReactions:!0}},{id:3,label:"Enable In App Notifications for Reactions (All Reactions)",config:{enableInAppNotifications:!0,enableNotificationsForAllReactions:!0}}]})},301107:function(e,t,n){n.d(t,{W:()=>o}),n(413496),n(433524),n(35282),n(415506);var r=n(73800),l=n(250683),i=n(825448);function o(e){let{fingerprintBase64:t,chunkSize:n,desiredLength:o}=e,a=r.useMemo(()=>{if(null==t||""===t)return null;let e=l.toByteArray(t),r=(0,i.Dq)(e,o,n);if(null==r)return null;let a=RegExp(".{1,".concat(n,"}"),"g"),s=r.match(a);return null==s?null:Array.from(s)},[n,t,o]);if(null!=t&&""!==t&&null==a)throw Error("[useReadableSecureFramesCode] Failed to parse base 64 code.");return a}},160038:function(e,t,n){n.d(t,{Z:()=>x}),n(388685),n(49124);var r=n(255367),l=n(73800),i=n(120356),o=n.n(i),a=n(46973),s=n(481060),c=n(304680),u=n(706619),d=n(695346),f=n(131951),h=n(626135),p=n(572004),g=n(63063),y=n(476221),O=n(981631),b=n(65154),N=n(388032),m=n(684680);let v=()=>{f.Z.getMediaEngine().once(a.aB.ConnectionStats,e=>{let t=JSON.stringify(Object.values(b.Yn).map(t=>{let n=e.filter(e=>{let{connection:n}=e;return n.context===t}).map((e,n)=>{let r=e.stats;return r.context=t,r.index=n,r});for(let e of n){var r;(null==e||null==(r=e.transport)?void 0:r.localAddress)!=null&&(e.transport.localAddress="(redacted)")}return n}).filter(e=>e.length>0),null,2);(0,p.JG)(t,()=>(0,s.showToast)((0,s.createToast)(N.intl.string(N.t["t5VZ8/"]),s.ToastType.SUCCESS)))})},x=function(e){(0,l.useEffect)(()=>{h.default.track(O.rMx.OPEN_POPOUT,{type:"RTC Connection"})},[]);let t=(0,l.useCallback)(()=>{let{closePopout:t}=e;null!=t&&t(),c.bA()},[e]),n=(0,l.useCallback)(()=>{let{hostname:t,averagePing:n,lastPing:i,outboundLossRate:a}=e,s=d.Sb.getSetting();return(0,r.jsxs)(l.Fragment,{children:[s&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:m.graphContainer,children:(0,r.jsx)(u.Z,{dataPoints:e.pings,width:258,height:80})}),(0,r.jsx)("div",{className:m.popoutText,children:(0,r.jsx)("strong",{children:y.Z.getShortHostname(t)})})]}),(0,r.jsx)("div",{className:m.popoutText,children:N.intl.format(N.t["X58/lJ"],{averagePing:n.toFixed(0)})}),null!=i?(0,r.jsx)("div",{className:m.popoutText,children:N.intl.format(N.t["6iv2TE"],{lastPing:i.toFixed(0)})}):null,null!=a?(0,r.jsx)("div",{className:m.popoutText,children:N.intl.format(N.t.VIBJMz,{outboundLossRate:a.toFixed(1)})}):null,(0,r.jsxs)("div",{className:o()(m.popoutText,m.popoutTextDetails),children:[null==a?N.intl.formatToPlainString(N.t.vggaMj,{badPing:250}):null,null!=a?N.intl.formatToPlainString(N.t["3pFz1N"],{badPing:250,badLossRate:10}):null]})]})},[e]),{connectionState:i,connectionTypeText:a}=e,p=d.Sb.getSetting(),x={[O.hes.AWAITING_ENDPOINT]:N.intl.format(N.t.Eu2vUV,{url:O.yXt.STATUS}),[O.hes.CONNECTING]:N.intl.string(N.t["y+E8aG"]),[O.hes.AUTHENTICATING]:N.intl.string(N.t["5lGIZG"]),[O.hes.DISCONNECTED]:N.intl.string(N.t.fOX25O),[O.hes.RTC_CONNECTING]:N.intl.string(N.t.b5Ubd3),[O.hes.ICE_CHECKING]:N.intl.format(N.t.SyoYUV,{url:g.Z.getArticleURL(O.BhN.VOICE_CONNECTION_ERRORS)}),[O.hes.DTLS_CONNECTING]:N.intl.format(N.t.SyoYUV,{url:g.Z.getArticleURL(O.BhN.VOICE_CONNECTION_ERRORS)}),[O.hes.RTC_CONNECTED]:n,[O.hes.NO_ROUTE]:N.intl.format(N.t["2tgQnp"],{url:g.Z.getArticleURL(O.BhN.VOICE_CONNECTION_ERRORS)}),[O.hes.RTC_DISCONNECTED]:N.intl.string(N.t.fOX25O)}[i];return(0,r.jsxs)(r.Fragment,{children:["function"==typeof x?x():(0,r.jsx)("p",{className:o()(m.popoutText,m.popoutTextDetails),children:x}),(0,r.jsx)("hr",{className:m.separator}),(0,r.jsxs)("div",{className:m.popoutBottom,children:[(0,r.jsxs)("span",{className:o()(m.secured,m.textWithIcon),children:[(0,r.jsx)(s.mBM,{size:"xxs",color:s.TVs.colors.TEXT_POSITIVE.css,className:m.__invalid_icon}),a]}),p&&f.Z.supports(b.AN.DIAGNOSTICS)&&!__OVERLAY__&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.eee,{className:o()(m.debugButton,m.textWithIcon),onClick:t,children:[N.intl.string(N.t.KBoWg4),(0,r.jsx)(s.rgF,{size:"xxs",color:"currentColor",className:m.__invalid_icon})]}),(0,r.jsxs)(s.eee,{className:o()(m.copyStatsButton,m.textWithIcon),onClick:v,title:"Copy to clipboard",children:[N.intl.string(N.t["XEb+Sk"]),(0,r.jsx)(s.TIy,{size:"xxs",color:"currentColor",className:m.__invalid_icon})]})]}),!p&&!__OVERLAY__&&(0,r.jsx)(s.eee,{className:m.debugButton,href:g.Z.getArticleURL(O.BhN.VOICE_VIDEO_TROUBLESHOOTING),children:N.intl.string(N.t.hvVgAQ)})]})]})}},873596:function(e,t,n){n.d(t,{Z:()=>I}),n(388685);var r=n(255367),l=n(73800),i=n(442837),o=n(481060),a=n(313201),s=n(19780),c=n(979651),u=n(362446),d=n(571826),f=n(277642),h=n(441894),p=n(160038),g=n(586646),y=n(760373),O=n(388032),b=n(935179);function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function m(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function v(e){let{lobbyId:t,connectionTypeText:n,closePopout:l}=e,o=(0,i.cj)([u.Z],()=>({connectionState:u.Z.getConnectionState(t),hostname:u.Z.getHostname(t),averagePing:u.Z.getAveragePing(t),lastPing:u.Z.getLastPing(t),pings:u.Z.getPings(),outboundLossRate:u.Z.getOutboundLossRate(t)}));return(0,r.jsx)(p.Z,m(N({},o),{closePopout:l,connectionTypeText:n}))}function x(e){let{closePopout:t,connectionTypeText:n}=e,l=(0,i.cj)([s.Z],()=>({connectionState:s.Z.getState(),hostname:s.Z.getHostname(),averagePing:s.Z.getAveragePing(),lastPing:s.Z.getLastPing(),outboundLossRate:s.Z.getOutboundLossRate(),pings:s.Z.getPings()}));return(0,r.jsx)(p.Z,m(N({},l),{closePopout:t,connectionTypeText:n}))}function E(e){let{channelId:t,isOverlay:n,lobbyId:l,closePopout:i}=e,o=(0,h.J)({channelId:t})?O.intl.string(O.t["3BogKS"]):O.intl.string(O.t.ETIVvr);return n?(0,r.jsx)(v,{lobbyId:l,closePopout:i,connectionTypeText:o}):(0,r.jsx)(x,{closePopout:i,connectionTypeText:o})}function C(e){let t=(0,i.e7)([c.Z],()=>c.Z.hasVideo(e.channelId)),[n,s]=l.useState(y.tu.RTC_DEBUG_PANEL),u=(0,a.Dt)(),h=l.useMemo(()=>{switch(n){case y.tu.RTC_DEBUG_PANEL:return(0,r.jsx)(E,N({},e));case y.tu.RTC_SECURE_FRAMES:return(0,r.jsx)(g.Z,{channelId:e.channelId})}},[e,n]);l.useEffect(()=>{(0,d.sN)({channelId:e.channelId,selectedTab:n})},[e.channelId,n]);let p=(0,f.r)();return l.useEffect(()=>{p&&s(y.tu.RTC_DEBUG_PANEL)},[p]),(0,r.jsxs)("div",{className:b.container,children:[(0,r.jsx)(o.X6q,{className:b.title,variant:"heading-lg/bold",color:"header-primary",children:t?O.intl.string(O.t.IlHdW1):O.intl.string(O.t.WsOisr)}),(0,r.jsxs)(o.njP,{className:b.tabs,selectedItem:n,type:"top",look:"brand",onItemSelect:s,children:[(0,r.jsx)(o.njP.Item,{id:y.tu.RTC_DEBUG_PANEL,className:b.tabBarItem,children:O.intl.string(O.t.MBY1Pj)}),p?null:(0,r.jsx)(o.njP.Item,{id:y.tu.RTC_SECURE_FRAMES,className:b.tabBarItem,children:O.intl.string(O.t.zC6o3t)})]}),(0,r.jsx)(o.njP.Panel,{id:n,"aria-labelledby":u,children:h})]})}function I(e){return(0,h.J)({channelId:e.channelId})?(0,r.jsx)(C,N({},e)):(0,r.jsx)("div",{className:b.debugPanelStandalone,children:(0,r.jsx)("section",{className:b.debugPanelSection,children:(0,r.jsx)(E,N({},e))})})}},917405:function(e,t,n){n.d(t,{Z:()=>x}),n(388685);var r=n(255367),l=n(73800),i=n(120356),o=n.n(i),a=n(481060),s=n(100527),c=n(522651),u=n(476221),d=n(873596),f=n(423516),h=n(981631),p=n(683560);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){g(e,t,n[t])})}return e}let O={[h.IE4.UNKNOWN]:a.ua7.Colors.BLACK,[h.IE4.BAD]:a.ua7.Colors.RED,[h.IE4.AVERAGE]:a.ua7.Colors.YELLOW,[h.IE4.FINE]:a.ua7.Colors.GREEN},b={[h.QKv.CONNECTED]:p.rtcConnectionStatusConnected,[h.QKv.CONNECTING]:p.rtcConnectionStatusConnecting,[h.QKv.ERROR]:p.rtcConnectionStatusError},N={[h.IE4.FINE]:p.rtcConnectionQualityFine,[h.IE4.AVERAGE]:p.rtcConnectionQualityAverage,[h.IE4.BAD]:p.rtcConnectionQualityBad,[h.IE4.UNKNOWN]:null};class m extends l.PureComponent{renderPopoutTarget(e){let t=this.props.channelId;return null==t?e({}):(0,r.jsx)(a.yRy,{targetElementRef:this.statusButtonRef,renderPopout:this.renderPopout(t),position:"top",children:e})}renderStatus(){let{hasVideo:e,state:t,channelId:n}=this.props,{connectionStatus:l,connectionStatusText:i}=u.Z.getStatus(t,e);return this.renderPopoutTarget(e=>{let{onClick:t}=e;return(0,r.jsx)(a.zxk,{buttonRef:this.statusButtonRef,look:a.zxk.Looks.BLANK,size:a.zxk.Sizes.NONE,onClick:e=>{(0,c.v)(s.Z.RTC_PANEL,c.d.CONNECTION_STATUS),null==t||t(e)},children:(0,r.jsx)(f.Z,{text:i,textVariant:this.props.connectionStatusTextVariant,hasVideo:this.props.hasVideo,className:b[l],hasConnectedChannel:null!=n})})})}render(){let e,{quality:t,smallPing:n,lastPing:l,state:i,className:s,children:c,childrenAsSubtitle:u}=this.props;return i===h.hes.RTC_CONNECTED&&(e=(0,r.jsx)(a.ua7,{text:t!==h.IE4.UNKNOWN&&null!=l?"".concat(l.toFixed(0)," ms"):null,color:O[t],children:e=>(0,r.jsx)(v,y({quality:t,smallPing:!u&&n,largePing:u},e))})),(0,r.jsxs)("div",{className:p.rtcConnectionStatusWrapper,children:[(0,r.jsxs)("div",{className:o()(p.rtcConnectionStatus,N[t],s),children:[e,(0,r.jsxs)("div",{className:p.labelWrapper,children:[this.renderStatus(),u?c:null]})]}),u?null:c]})}constructor(...e){super(...e),g(this,"statusButtonRef",l.createRef()),g(this,"renderPopout",e=>t=>{var n,l;return(0,r.jsx)(d.Z,(n=y({},t),l=l={channelId:e},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(l)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(l)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(l,e))}),n))})}}function v(e){var{quality:t,smallPing:n,largePing:l}=e,i=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,["quality","smallPing","largePing"]);let s={[h.IE4.FINE]:a.B_b,[h.IE4.AVERAGE]:a.hLg,[h.IE4.BAD]:a.mbS,[h.IE4.UNKNOWN]:a._3e}[t];return(0,r.jsx)(s,y({className:o()(p.ping,{[p.smallPing]:n,[p.largePing]:l})},i))}let x=m},423516:function(e,t,n){n.d(t,{Z:()=>d});var r=n(255367);n(73800);var l=n(120356),i=n.n(l),o=n(481060),a=n(570928),s=n(540059),c=n(388032),u=n(593210);let d=function(e){let{className:t,hasVideo:n,text:l,hasConnectedChannel:d,textVariant:f="text-md/medium"}=e,h=(0,s.Q3)("RTCConnectionStatusText"),p=n?c.intl.string(c.t.IlHdW1):c.intl.string(c.t.WsOisr);return(0,r.jsx)(a.Z,{className:i()(t,u.hoverableStatus),hoverText:d?h?(0,r.jsx)(o.Text,{variant:f,color:"currentColor",children:p}):p:null,children:h?(0,r.jsx)(o.Text,{variant:f,color:"currentColor",children:l}):l})}},586646:function(e,t,n){n.d(t,{Z:()=>y});var r=n(255367),l=n(73800),i=n(442837),o=n(481060),a=n(19780),s=n(571826),c=n(630759),u=n(301107),d=n(785792),f=n(190054),h=n(760373),p=n(388032),g=n(764229);function y(e){let{channelId:t}=e,n=(0,i.e7)([a.Z],()=>{var e;return null==(e=a.Z.getSecureFramesState())?void 0:e.epochAuthenticator}),y=(0,u.W)({fingerprintBase64:n,chunkSize:h.y6,desiredLength:h.YP}),O=l.useCallback(()=>{(0,s.PM)({channelId:t})},[t]);return(0,r.jsxs)("div",{className:g.container,children:[(0,r.jsxs)("div",{className:g.tag,children:[(0,r.jsx)(o.mBM,{size:"xxs",color:o.TVs.colors.TEXT_POSITIVE}),(0,r.jsx)(o.Text,{variant:"text-xs/medium",color:"text-positive",children:p.intl.string(p.t["3BogKS"])})]}),(0,r.jsx)(o.Text,{variant:"text-xs/normal",color:"text-secondary",children:p.intl.string(p.t.B9JNsr)}),(0,r.jsxs)("div",{className:g.header,children:[(0,r.jsx)(o.X6q,{variant:"text-sm/bold",color:"header-primary",children:p.intl.string(p.t.cTQI5u)}),null!=y&&(0,r.jsx)(f.H,{chunks:y,color:o.TVs.colors.INTERACTIVE_NORMAL.css,onCopy:O})]}),(0,r.jsx)(d.b,{className:g.code,chunks:y,columns:h.WK}),(0,r.jsx)(o.Text,{variant:"text-xs/normal",color:"text-secondary",children:p.intl.format(p.t.wKxADQ,{helpArticle:(0,c.uV)()})})]})}},785792:function(e,t,n){n.d(t,{b:()=>c});var r=n(255367),l=n(73800),i=n(120356),o=n.n(i),a=n(481060),s=n(135169);function c(e){let{chunks:t,columns:n,className:i}=e,c=l.useMemo(()=>({"--secure-frames-columns":n}),[n]);return null==t?(0,r.jsx)("div",{className:s.loading,children:(0,r.jsx)(a.$jN,{})}):(0,r.jsx)("div",{style:c,className:o()(s.code,i),children:t.map((e,t)=>(0,r.jsx)("div",{className:o()(s.chunk,{[s.divider]:t>n-1}),children:(0,r.jsx)(a.Text,{className:s.codeText,variant:"code",color:"text-normal",children:e})},"".concat(e,"-").concat(t)))})}},190054:function(e,t,n){n.d(t,{H:()=>d}),n(388685);var r=n(255367),l=n(73800),i=n(120356),o=n.n(i),a=n(481060),s=n(572004),c=n(388032),u=n(798665);function d(e){var{chunks:t,className:n,onCopy:i}=e,d=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,["chunks","className","onCopy"]);let f=l.useMemo(()=>null==t?void 0:t.join(" "),[t]),[h,p]=l.useState(!1),g=l.useCallback(()=>{(0,s.JG)(f,()=>{p(!0),null==i||i()})},[i,f]),y=h?a.owK:a.TIy;return(0,r.jsx)(a.P3F,{className:o()(u.container,n),onClick:g,children:(0,r.jsx)(a.ua7,{text:h?c.intl.string(c.t["t5VZ8/"]):c.intl.string(c.t.OpuAlJ),children:e=>{var t,n;return(0,r.jsx)(y,(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},d,e),n=n={size:"xxs",color:h?a.TVs.colors.TEXT_POSITIVE:a.TVs.colors.INTERACTIVE_NORMAL},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))}})})}},706619:function(e,t,n){n.d(t,{Z:()=>s}),n(388685);var r=n(255367),l=n(73800),i=n(311308),o=n(692547),a=n(481060);function s(e){let t=(0,l.useRef)(null),[n,s]=(0,l.useState)(null),[c]=(0,l.useState)(()=>new i.TimelineDataSeries),u=(0,a.dQu)(o.Z.colors.BACKGROUND_PRIMARY).hsl(),d=(0,a.dQu)(o.Z.colors.TEXT_NORMAL).hsl(),f=(0,a.dQu)(o.Z.colors.BACKGROUND_ACCENT).hsl(),h=(0,a.dQu)(o.Z.unsafe_rawColors.BRAND_500).hsl();(0,l.useEffect)(()=>{var e;let n=t.current;if(null==n)return;let r=new i.TimelineGraphView(n,null!=(e=window.devicePixelRatio)?e:1);r.backgroundColor=u,r.textColor=d,r.gridColor=f,r.timeOptions={timeStyle:"short"},r.fontFamily="gg sans",r.fontSize=11,c.setColor(h),r.addDataSeries(c),r.updateEndDate(),s(r)},[t,u,h,f,d,c]),c.setPoints(e.dataPoints),null==n||n.updateEndDate();let p={width:e.width,height:e.height};return(0,r.jsx)("canvas",{style:p,width:e.width,height:e.height,ref:t},"canvas")}},352527:function(e,t,n){n.d(t,{Z:()=>d});var r,l,i,o=n(442837),a=n(570140);let s=!1,c=!1;class u extends(i=o.ZP.Store){get keepOpen(){return c}get enabled(){return s}}l="SoundboardOverlayStore",(r="displayName")in u?Object.defineProperty(u,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):u[r]=l;let d=new u(a.Z,{SOUNDBOARD_SET_OVERLAY_ENABLED:function(e){if(s=e.enabled,e.enabled){var t;c=null!=(t=e.keepOpen)&&t}}})},964398:function(e,t,n){n.d(t,{Z:()=>y}),n(388685),n(415506);var r=n(255367),l=n(73800),i=n(392711),o=n.n(i),a=n(481060),s=n(65205),c=n(388032),u=n(670161);function d(e){let{className:t}=e;return(0,r.jsxs)("svg",{className:t,fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[(0,r.jsx)("g",{filter:"url(#a)",children:(0,r.jsx)("path",{d:"M30.4 8 24 14.4 17.6 8 16 9.6l6.4 6.4-6.4 6.4 1.6 1.6 6.4-6.4 6.4 6.4 1.6-1.6-6.4-6.4L32 9.6 30.4 8Z",fill:"currentColor"})}),(0,r.jsx)("defs",{children:(0,r.jsxs)("filter",{id:"a",x:"0",y:"0",width:"48",height:"48",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.jsx)("feOffset",{dy:"8"}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"8"}),(0,r.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"}),(0,r.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_605_72103"}),(0,r.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_605_72103",result:"shape"})]})})]})}let f=[{x:.5,y:.05},{x:.95,y:.2},{x:1,y:.5},{x:.95,y:.8},{x:.5,y:.95},{x:.05,y:.8},{x:0,y:.5},{x:.05,y:.2}],h=f.length;function p(e,t,n){let r=e*t;return e>.5?r-n:e<.5?r:r-n/2}let g=(e,t)=>{let n=Math.abs(t.x),r=180/Math.PI*Math.atan2(Math.abs(t.y),n),l=e/2-28.8;return{x:Math.max(l*Math.cos(2*Math.PI*r/360),0),y:Math.max(l*Math.sin(2*Math.PI*r/360),0)}},y=l.memo(function(e){let{wheelWidth:t,wheelHeight:n,itemWidth:y,itemHeight:O,showDeadZoneIndicator:b,activeItem:N,onItemSelect:m,onItemAction:v,interactive:x=!0,onClose:E,children:C}=e,I=l.useRef(null),T=l.useRef([]),j=l.useRef(!1),S=l.useRef(null),[P,_]=l.useState(0),[Z,A]=l.useState({x:0,y:0}),w=Math.abs(Z.x)+Math.abs(Z.y)>0,R=l.useMemo(()=>o().chunk(C,h),[C]),D=l.useCallback((e,t)=>{null==T.current[P]?T.current[P]=[]:T.current[P][t]=e},[P]),U=l.useCallback((e,t)=>{S.current=t,m(h*e+t)},[m]),k=l.useCallback(()=>{S.current=null,m(null)},[m]),M=l.useCallback(e=>{k(),j.current=e},[k]),L=l.useCallback((e,t,n)=>{if(j.current)return void A({x:0,y:0});let r={x:e.x-t.x,y:e.y-t.y},l=r.x<0,i=r.y<0,o=g(n,r);A({x:(l?Math.max(r.x,-o.x):Math.min(r.x,o.x))/2,y:(i?Math.max(r.y,-o.y):Math.min(r.y,o.y))/2})},[]),B=l.useCallback(e=>{null!=S.current&&(e.preventDefault(),e.stopPropagation(),null==v||v(h*P+S.current))},[v,P]),G=l.useMemo(()=>(0,i.throttle)(e=>{if(null==I.current)return;let r=I.current.getBoundingClientRect(),l={x:r.left+r.width/2,y:r.top+r.height/2},i={x:e.clientX,y:e.clientY};if(L(i,l,Math.max(t,n)),j.current){null!=N&&k();return}let o=(0,s.ld)(l,i,Math.max(t,n));for(let e=0;e<T.current[P].length;e++){let t=T.current[P][e];if(null==t)continue;let n=t.getBoundingClientRect();if((0,s.Vr)(l,o,n))return void U(P,e)}k()},16),[N,L,k,U,P,n,t]),V=l.useCallback(e=>{if(!x)return;let t=P+(e.deltaY>0?1:-1);t>=0&&t<R.length&&(null!=S.current&&(R[t].length>S.current?U(t,S.current):k()),_(t))},[x,P,R,U,k]),F=l.useMemo(()=>R[P].map((e,l)=>{let i=f[l];if(null==i)throw Error("Too many items supplied ".concat(C.length," expected max of ").concat(f.length));let o=p(i.x,t,y),a=p(i.y,n,O);return(0,r.jsx)("div",{ref:e=>D(e,l),className:u.chatWheelItem,style:{left:o,top:a,width:y,height:O},children:e},l)}),[R,P,t,y,n,O,C.length,D]);return(0,r.jsx)(a.P3F,{className:u.chatWheelMouseInput,onMouseMove:G,onWheel:V,onClick:B,children:(0,r.jsxs)("div",{ref:I,className:u.chatWheel,style:{width:t,height:n},children:[(0,r.jsxs)("svg",{className:u.chatWheelBackground,viewBox:"0 0 288 288",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("filter",{id:"soundboard-wheel-background-shadow",x:"0",y:"0",width:"288",height:"288",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.jsx)("feOffset",{dy:"8"}),(0,r.jsx)("feGaussianBlur",{stdDeviation:"8"}),(0,r.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"}),(0,r.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_489_60382"}),(0,r.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_489_60382",result:"shape"})]}),(0,r.jsxs)("g",{filter:"url(#soundboard-wheel-background-shadow)",children:[(0,r.jsx)("circle",{className:u.chatWheelBackground,cx:"144",cy:"144",r:"103.68",strokeWidth:"40.32"}),b&&(0,r.jsx)("circle",{className:u.chatWheelDeadZone,onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),cx:144,cy:144,r:28.8}),w&&(0,r.jsx)("circle",{className:u.chatWheelCenter,cx:144+Z.x,cy:144+Z.y,r:28.8})]}),b&&(0,r.jsx)("circle",{className:u.chatWheelDeadZone,onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),cx:144,cy:144,r:28.8,stroke:"none"})]}),(0,r.jsxs)("div",{className:u.innerContent,children:[b&&(0,r.jsx)(a.P3F,{className:u.chatWheelDeadZoneIcon,onClick:E,children:(0,r.jsx)(d,{className:u.chatWheelDeadZoneIcon})}),x&&R.length>1?(0,r.jsx)("div",{className:u.paginationHint,children:c.intl.string(c.t["Xy+S09"])}):null]}),F]})})})},183584:function(e,t,n){n.d(t,{IN:()=>s,oZ:()=>c}),n(255367),n(73800);var r=n(570140),l=n(610394);n(238246),n(788983),n(592125),n(19780);var i=n(237997);n(998502),n(487029);var o=n(710111);n(981631),n(388032);let a={width:o.FW.width,height:o.FW.height,resizable:!1,movable:!1,alwaysOnTop:!0,frame:!1,transparent:!0,hasShadow:!1,skipTaskbar:!0,menubar:!0,backgroundColor:"#00000000",titleBarStyle:null};function s(e,t){let n=l.ZP.isOverlayV3EnabledForPID(t),o=i.default.disableClickableRegions;n||o||r.Z.dispatch({type:"OVERLAY_SET_INPUT_LOCKED",locked:!1,pid:t}),r.Z.dispatch({type:"SOUNDBOARD_SET_OVERLAY_ENABLED",pid:t,enabled:!0,keepOpen:e})}function c(e){r.Z.dispatch({type:"SOUNDBOARD_SET_OVERLAY_ENABLED",pid:e,enabled:!1});let t=l.ZP.isOverlayV3EnabledForPID(e),n=i.default.disableClickableRegions;i.default.isLocked(e)||t||n||r.Z.dispatch({type:"OVERLAY_SET_INPUT_LOCKED",locked:!0,pid:e})}o.FW.padding,a.width,a.height},487029:function(e,t,n){n.d(t,{Z:()=>x}),n(388685),n(642613),n(539854);var r=n(255367),l=n(73800),i=n(990547),o=n(442837),a=n(100527),s=n(906732),c=n(213609),u=n(675478),d=n(19780),f=n(709054),h=n(208049),p=n(763296),g=n(242291),y=n(174470),O=n(549771),b=n(964398),N=n(294206),m=n(710111),v=n(840558);function x(e){let{guildId:t,channel:n,width:x,height:E,keepOpen:C,interactive:I=!0,analyticsSource:T,onClose:j}=e,S=function(e){let[t,n]=(0,o.Wu)([p.Z],()=>[p.Z.getSounds(),p.Z.getFavorites()]);return l.useMemo(()=>{let r=[],l=[...e,m.X8],i=(e,l)=>{var i,o;for(let a of null!=(o=null==(i=t.get(e))?void 0:i.sort((e,t)=>f.default.compare(e.soundId,t.soundId)))?o:[]){let e=n.has(a.soundId);(e&&l||!e&&!l)&&a.available&&r.push(a)}};return l.forEach(e=>i(e,!0)),l.forEach(e=>i(e,!1)),r},[t,n,e])}((0,O.h)(n,!0)),P=(0,y.j)(),_=l.useRef(null),[Z,A]=l.useState(void 0),w=(0,o.e7)([d.Z],()=>d.Z.getMediaSessionId()),{analyticsLocations:R}=(0,s.ZP)(a.Z.SOUNDBOARD_WHEEL),D=l.useCallback(e=>{(0,g.GN)(e,n.id,R),j()},[R,n.id,j]);l.useEffect(()=>{h.w(),u.DZ.loadIfNecessary()},[]),l.useEffect(()=>{0===S.length&&0===P.length&&j()},[S.length,P,j]),l.useEffect(()=>()=>{let e=_.current;C||null==e||D(e)},[C,D]),(0,c.Z)({type:i.ImpressionTypes.POPOUT,name:i.ImpressionNames.SOUNDBOARD_POPOUT,properties:{source:T,guild_id:t,media_session_id:w}},{disableTrack:!I});let U=l.useCallback(e=>{_.current=e,A(null==e?void 0:e.soundId)},[]),k=l.useCallback(e=>{if(null==e)return void U(null);let t=S[e];null!=t&&U(t)},[U,S]),M=l.useCallback(e=>{if(null==e)return;let t=S[e];null!=t&&D(t)},[S,D]),L=l.useMemo(()=>S.map(e=>(0,r.jsx)(N.ZP,{interactive:I,className:v.soundButton,sound:e,focused:Z===e.soundId,channel:n},e.soundId)),[Z,n,I,S]);return 0===S.length?null:(0,r.jsx)(s.Gt,{value:R,children:(0,r.jsx)(b.Z,{wheelWidth:x,wheelHeight:E,itemWidth:96,itemHeight:52,showDeadZoneIndicator:!C,activeItem:Z,onItemSelect:k,onItemAction:M,onClose:j,interactive:I,children:L})})}},261600:function(e,t,n){n.d(t,{U:()=>h});var r=n(255367),l=n(73800),i=n(399606),o=n(481060),a=n(592125),s=n(922482),c=n(750154),u=n(427679),d=n(388032);function f(e){var t,n;let{activity:f}=e,{channelId:h}=null!=(t=(0,c.rq)(f))?t:{},p=(0,i.e7)([u.Z],()=>u.Z.getStageInstanceByChannel(h),[h]),g=l.useRef(null),y=l.useCallback(()=>{let e=a.Z.getChannel(h);null!=e&&s.Cq(e)},[h]),O=null!=(n=null==p?void 0:p.topic)?n:f.name,b=d.intl.formatToPlainString(d.t["T+DNAA"],{channel:O});return(0,r.jsx)("div",{ref:g,children:(0,r.jsx)(o.P3F,{onClick:y,focusProps:{ringTarget:g},children:(0,r.jsx)(o.X6q,{variant:"heading-sm/semibold",children:b})})})}class h{shouldShow(e){return(0,c.JE)(e)}createHeader(e){return{subtitle:d.intl.string(d.t["+AJFJy"]),icon:null}}constructor(){var e;(e="body")in this?Object.defineProperty(this,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):this[e]=f}}},630186:function(e,t,n){n.d(t,{Z:()=>a,_:()=>o});var r=n(726542),l=n(973616),i=n(388032);let o="twitch:";class a extends l.ZP{getIconURL(){return r.Z.get("twitch").icon.lightPNG}constructor(e){super(e),this.id="".concat(o).concat(e.url),this.name=i.intl.string(i.t.JIPtgo)}}},250889:function(e,t,n){n.d(t,{H:()=>i,Z:()=>o});var r=n(726542),l=n(973616);let i="xbox:";class o extends l.ZP{getIconURL(){return r.Z.get("xbox").icon.lightPNG}constructor(e){super(e),this.id="".concat(i).concat(e.name),this.name=e.name}}},606206:function(e,t,n){let r;n.d(t,{Z:()=>P}),n(388685),n(539854),n(781311),n(35282);var l,i=n(442837),o=n(570140),a=n(278323),s=n(212819),c=n(933557),u=n(592125),d=n(430824),f=n(293273),h=n(158776),p=n(699516),g=n(594174),y=n(55589),O=n(981631);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let N=[s.h8.TEXT_CHANNEL,s.h8.GROUP_DM,s.h8.USER],m=null,v=null,x=[],E=[];function C(e){x=[...x,e],E=E.map(e=>{var t,n;return t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){b(e,t,n[t])})}return e}({},e),n=n={sent:x.includes(e.data.record.id)},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t}),S.emitChange()}function I(){m=null,null!=r&&(r.destroy(),r=null),null!=v&&v()}function T(){let e=null!=m&&null!=m.application_id?f.Z.getApplicationActivity(m.application_id):null;if(null!=m&&(null==e||null==e.party||null==e.party.id))return I()}class j extends(l=i.ZP.Store){initialize(){this.waitFor(f.Z)}getActivity(){return m}getQuery(){var e;return null!=(e=null==r?void 0:r.query)?e:""}getResults(){return E}}b(j,"displayName","ActivityInviteModalStore");let S=new j(o.Z,{ACTIVITY_INVITE_MODAL_OPEN:function(e){m=e.activity,v=e.resolve,x=[],null==r&&(r=new s.ZP((e,t)=>{E=(""===t.trim()?function(){let e=[];return y.Z.getPrivateChannelIds().forEach(t=>{let n=u.Z.getChannel(t);if(null!=n)if(n.type===O.d4z.DM){let t=n.getRecipientId(),r=null!=t?g.default.getUser(t):null;null!=r&&e.push({type:s.h8.USER,record:r,score:0})}else n.isMultiUserDM()&&e.push({type:s.h8.GROUP_DM,record:n,score:0})}),e}():e).map(e=>{switch(e.type){case s.h8.USER:{let{record:t}=e;return{type:s.h8.USER,sent:x.includes(t.id),status:h.Z.getStatus(t.id),data:e}}case s.h8.TEXT_CHANNEL:{let{record:t}=e,n=u.Z.getChannel(t.parent_id),r=d.Z.getGuild(t.guild_id);return{type:s.h8.TEXT_CHANNEL,sent:x.includes(t.id),categoryName:null!=n?(0,c.F6)(n,g.default,p.Z):"",guildName:null!=r?r.toString():"",data:e}}case s.h8.GROUP_DM:{let{record:t}=e;return{type:s.h8.GROUP_DM,sent:x.includes(t.id),data:e}}default:return null}}).filter(e=>null!=e),S.emitChange()},N,100)),r.search("")},ACTIVITY_INVITE_MODAL_QUERY:function(e){let{query:t}=e;null!=r&&r.search(t)},ACTIVITY_INVITE_MODAL_SEND:function(e){if(null==m)return;let t=e.channelId,n=e.userId;null!=t?a.Z.sendActivityInvite({channelId:t,type:O.mFx.JOIN,activity:m,location:"Channel Text Area - Invite to Join Modal"}).then(()=>C(t)):null!=n&&a.Z.sendActivityInviteUser({userId:n,type:O.mFx.JOIN,activity:m,location:"Channel Text Area - Invite to Join Modal"}).then(()=>C(n))},ACTIVITY_INVITE_MODAL_CLOSE:I,OVERLAY_SET_INPUT_LOCKED:function(e){let{locked:t}=e;return!!t&&null!=m&&(I(),!0)},LOCAL_ACTIVITY_UPDATE:T,RPC_APP_DISCONNECTED:T}),P=12633==n.j?S:null},362446:function(e,t,n){n.d(t,{Z:()=>h});var r,l,i,o=n(442837),a=n(570140),s=n(981631);let c={};function u(e){let t=c[e=null!=e?e:"null"];return null==t&&(t=c[e]={state:s.hes.DISCONNECTED,quality:s.IE4.UNKNOWN,pings:[],hostname:null,lossRate:null}),t}function d(e,t,n){let r=c[e=null!=e?e:"null"];return null!=r?t(r):n}class f extends(i=o.ZP.Store){getConnectionState(e){return d(e,e=>{let{state:t}=e;return t},s.hes.DISCONNECTED)}getQuality(e){return d(e,e=>{let{quality:t}=e;return t},s.IE4.UNKNOWN)}getHostname(e){return d(e,e=>{let{hostname:t}=e;return t},null)}getPings(e){return d(e,e=>{let{pings:t}=e;return t},[])}getAveragePing(e){let t=this.getPings(e);return 0===t.length?0:t.reduce((e,t)=>e+t.value,0)/t.length}getLastPing(e){var t;let n=this.getPings(e);return 0===n.length?0:null==(t=n[n.length-1])?void 0:t.value}getOutboundLossRate(e){return d(e,e=>{let{lossRate:t}=e;return t},null)}}l="OverlayRTCConnectionStore",(r="displayName")in f?Object.defineProperty(f,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):f[r]=l;let h=new f(a.Z,{OVERLAY_INITIALIZE:function(e){c=e.rtcConnectionStates},RTC_CONNECTION_STATE:function(e){if(null!=e.streamKey)return!1;let t=u(e.lobbyId);t.state=e.state,t.hostname=e.hostname},RTC_CONNECTION_PING:function(e){let t=u(e.lobbyId);t.pings=e.pings,t.quality=e.quality},RTC_CONNECTION_LOSS_RATE:function(e){u(e.lobbyId).lossRate=e.lossRate}})},801077:function(e,t,n){n.d(t,{Z:()=>ec}),n(388685),n(539854);var r,l=n(392711),i=n.n(l),o=n(442837),a=n(570140),s=n(790920),c=n(527805),u=n(841784),d=n(503438),f=n(802856),h=n(420660),p=n(728345),g=n(812206),y=n(710845),O=n(38618),b=n(656063),N=n(761282),m=n(752048),v=n(789407),x=n(630186),E=n(250889),C=n(199902),I=n(592125),T=n(480294),j=n(831506),S=n(731290),P=n(430824),_=n(496675),Z=n(158776),A=n(699516),w=n(594174),R=n(979651),D=n(823379),U=n(981631);function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){k(e,t,n[t])})}return e}function L(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let B=!1,G=!1,V=[],F=[],W={},Y={},K=new Set,H=new Set;function Q(){let e=A.Z.getFriendIDs();return new Set(T.Z.hasConsented(U.pjP.PERSONALIZATION)?[...m.Z.getUserAffinities().map(e=>e.otherUserId),...e]:e)}function z(e){return Z.Z.findActivity(e,e=>e.type!==U.IIU.CUSTOM_STATUS)}function X(e){return null==W[e]&&(W=L(M({},W),{[e]:new E.Z({name:e})})),W[e]}function J(e){return null==Y[e]&&(Y=L(M({},Y),{[e]:new x.Z({url:e})})),Y[e]}function q(e){H.has(e)||K.add(e)}function $(e){if((0,d.Z)(e))return v.r9;let t=null!=e.application_id?g.Z.getApplication(e.application_id):null;return null!=t?t:(0,f.Z)(e)?X(e.name):(0,h.Z)(e)&&null!=e.url?J(e.url):(null!=e.application_id&&q(e.application_id),t)}function ee(e){let t=R.Z.getVoiceStateForUser(e);return(null==t?void 0:t.channelId)!=null&&_.Z.canWithPartialContext(U.Plq.VIEW_CHANNEL,{channelId:t.channelId})?t.channelId:null}function et(e){return A.Z.isFriend(e.id)}function en(e,t,n){var r,l,o,a,d,f;let h,p=w.default.getCurrentUser(),O=null!=(r=null==p?void 0:p.nsfwAllowed)&&r,m=t.map(e=>e.id),T=t.filter(t=>e.has(t.id)),A=!1,U=[],k=new Set,M=!1,L=[];for(let e of t){let n=C.Z.getAnyStreamForUser(e.id),r=I.Z.getChannel(null==n?void 0:n.channelId);if((null==r?void 0:r.isNSFW())&&(!O||!S.Z.didAgree(null==r?void 0:r.getGuildId())))continue;let f=z(e.id);if(null!=n&&L.push({stream:n,streamUser:e,activity:f}),null==f)continue;let h=(0,b.Z)(f);if(null==h)continue;M=h===v.XB;let m=function(e){let t=g.Z.getApplication(e);return null!=t?t:"string"!=typeof e?(new y.Z("NowPlayingViewStore").error("Unknown type for applicationId: ".concat(typeof e,", value: ").concat(e),{tags:{source:"ACTIVITIES"}}),null):e===v.XB?v.r9:e.startsWith(E.H)?X(e.slice(E.H.length)):e.startsWith(x._)?J(e.slice(x._.length)):(q(e),null)}(h);if((0,u.Z)(f)){let t=(0,s.a)();if((0,c.ZP)({activity:f,userId:e.id,application:m,channelId:null==(o=R.Z.getVoiceStateForUser(e.id))?void 0:o.channelId,currentUser:p,isActivitiesEnabledForCurrentPlatform:t,ChannelStore:I.Z,VoiceStateStore:R.Z,PermissionStore:_.Z,GuildStore:P.Z})!==c.Fw.CAN_JOIN)continue}if(!N.JE(f)||null==m||k.has(m.id))continue;let T=null!=f?$(f):null;(null==T||T.id!==m.id)&&(f=null);let Z=[];Z=null!=f&&null!=f.party&&null!=f.party.id?Array.from(null!=(a=j.Z.getParty(f.party.id))?a:[]).reduce((e,t)=>{let n=w.default.getUser(t);return null!=n&&e.push(n),e},[]):t.filter(e=>{let t=z(e.id),n=null!=t?$(t):null;return null!=n&&n.id===m.id}),(Z=i().orderBy(Z,[et],["desc"])).length!==t.length&&(A=!0),k.add(m.id),U.push({game:m,activity:f,activityUser:e,startedPlayingTime:null!=(d=null==f||null==(l=f.timestamps)?void 0:l.start)?d:null==f?void 0:f.created_at,playingMembers:Z})}let B=1===T.length,G=[],V=new Set,F=new Set;for(let e of t){let n=ee(e.id),r=I.Z.getChannel(n),l=null!=r?r.getGuildId():null,o=P.Z.getGuild(l);if(F.has(l)&&V.has(n)||null==r||null==o||r.id===o.afkChannelId)null==r&&(h=null,B=!0);else{let e=R.Z.getVoiceStatesForChannel(r.id),a=i()(e).map(e=>{let{userId:t}=e;return w.default.getUser(t)}).filter(D.lm).orderBy([et],["desc"]).value();a.filter(e=>!m.includes(e.id)).forEach(e=>t.push(e)),B?F.has(l)||(h=null):(h=o,B=!0),F.add(l),V.add(n),G.push({channel:r,guild:o,members:a,voiceStates:e})}}return{id:n,voiceChannels:G,isSpotifyActivity:M,priorityMembers:T.map(e=>({user:e,status:Z.Z.getStatus(e.id)})),partiedMembers:t,showPlayingMembers:A,guildContext:h,currentActivities:(f=e=>{var t;return null!=(t=e.startedPlayingTime)?t:0},i()(U).orderBy([f,e=>e.game.name],["desc","asc"])).value(),applicationStreams:L}}function er(e){return 0!==e.voiceChannels.length&&e.voiceChannels.length>0&&e.voiceChannels.some(e=>{let{voiceStates:t}=e;return Object.values(t).some(e=>!1===e.discoverable)})}function el(){return B&&O.Z.isConnected()}let ei=i().throttle(()=>{!function(){var e;if(el()){if(K.clear(),F=(V=(function(e){let t=Q(),n=en.bind(null,t);return i()(e).mapValues(n)})((e=Array.from(Q()).reduce((e,t)=>{let n=w.default.getUser(t);return null==n||n.bot||e.push(n),e},[]),i()(e).groupBy(e=>{var t;let n=ee(e.id),r=z(e.id);return null!=n?"".concat("channel-").concat(n):(null==r||null==(t=r.party)?void 0:t.id)!=null?"".concat("party-").concat(r.party.id):"".concat("user-").concat(e.id)}))).values().orderBy([er,e=>e.partiedMembers.length>1,e=>e.applicationStreams.length>0,e=>e.voiceChannels.length>0,e=>e.currentActivities.length>0,e=>e.isSpotifyActivity,e=>e.priorityMembers.map(e=>e.user.username.toLowerCase()).join(" ")],["asc","desc","desc","desc","desc","asc","asc"]).value().filter(e=>{let t=e.partiedMembers.some(e=>A.Z.isBlockedOrIgnored(e.id)),n=0!==e.voiceChannels.length&&e.voiceChannels.length>0&&e.voiceChannels.every(e=>{let{voiceStates:t}=e;return Object.values(t).every(e=>!1===e.discoverable)});return(e.voiceChannels.length>=1||e.currentActivities.length>0||e.applicationStreams.length>0)&&!t&&!n})).map(e=>({type:U.GOo.USER,party:e})),K.size>0){let e=Array.from(K);p.ZP.fetchApplications(e),e.forEach(e=>H.add(e)),K.clear()}G=!0}}(),es.emitChange()},1e3);function eo(){return!!el()&&(ei(),!1)}class ea extends(r=o.ZP.Store){initialize(){this.syncWith([w.default,g.Z,Z.Z,j.Z,R.Z,C.Z,A.Z,T.Z,m.Z],eo),this.waitFor(O.Z,P.Z,g.Z,w.default,m.Z)}get currentActivityParties(){return V}get nowPlayingCards(){return F}get isMounted(){return B}get loaded(){return G}}k(ea,"displayName","NowPlayingViewStore");let es=new ea(a.Z,{LOGOUT:function(){B=!1,V=[],F=[],K.clear()},NOW_PLAYING_MOUNTED:function(){B=!0,ei()},NOW_PLAYING_UNMOUNTED:function(){B=!1}}),ec=es},65205:function(e,t,n){function r(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function l(e,t,n,l){return r(e,n,l)!==r(t,n,l)&&r(e,t,n)!==r(e,t,l)}function i(e,t,n){let r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));return{x:t.x+(t.x-e.x)/r*n,y:t.y+(t.y-e.y)/r*n}}function o(e,t,n){let r={x:n.x,y:n.y},i={x:n.x+n.width,y:n.y},o={x:n.x,y:n.y+n.height},a={x:n.x+n.width,y:n.y+n.height};return l(e,t,r,i)||l(e,t,i,a)||l(e,t,a,o)||l(e,t,o,r)}n.d(t,{Vr:()=>o,ld:()=>i})},912101:function(e,t,n){n.d(t,{Z:()=>r}),n(654769);let r=n(654769).Z},476221:function(e,t,n){n.d(t,{Z:()=>i}),n(35282);var r=n(981631),l=n(388032);let i={getStatus:function(e){let t,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case r.hes.CONNECTING:t=r.QKv.CONNECTING,n=l.intl.string(l.t.MzW9sL);break;case r.hes.AUTHENTICATING:t=r.QKv.CONNECTING,n=l.intl.string(l.t.GxXwEx);break;case r.hes.AWAITING_ENDPOINT:t=r.QKv.CONNECTING,n=l.intl.string(l.t.xEbu0d);break;case r.hes.RTC_CONNECTED:t=r.QKv.CONNECTED,n=i?l.intl.string(l.t.HtVOdX):l.intl.string(l.t["daXg4+"]);break;case r.hes.RTC_CONNECTING:t=r.QKv.CONNECTING,n=l.intl.string(l.t.Gp51dn);break;case r.hes.ICE_CHECKING:t=r.QKv.CONNECTING,n=l.intl.string(l.t.rdCyAw);break;case r.hes.DTLS_CONNECTING:t=r.QKv.CONNECTING,n=l.intl.string(l.t.UvB3gY);break;case r.hes.NO_ROUTE:t=r.QKv.ERROR,n=l.intl.string(l.t.mGhOIi);break;case r.hes.RTC_DISCONNECTED:t=r.QKv.ERROR,n=l.intl.string(l.t.M7LDmJ);break;case r.hes.DISCONNECTED:default:t=r.QKv.ERROR,n=l.intl.string(l.t.NLKQb2)}return{connectionStatus:t,connectionStatusText:n}},getShortHostname:function(e){return null==e?"":e.split(".")[0]}}}}]);
//# sourceMappingURL=42692cd866a1b87c.js.map