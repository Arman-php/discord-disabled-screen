"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["7590"],{185413:function(e,t,n){n.d(t,{U:()=>L,default:()=>N,t:()=>M}),n(953529),n(388685),n(781311),n(413496),n(433524),n(35282),n(539854);var r=n(255367),l=n(73800),i=n(442837),a=n(481060),s=n(741361),o=n(461745),c=n(600164),d=n(313201),u=n(131704),m=n(592125),x=n(271383),h=n(430824),b=n(626135),y=n(934415),f=n(892880),p=n(226951),g=n(605436),j=n(971628),v=n(71080),E=n(981631),S=n(494831),T=n(388032),w=n(208838);function R(e){var t=function(e,t){if("object"!==O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==O(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===O(t)?t:String(t)}function O(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}let k=(0,d.hQ)();function C(e,t){return t?e.slice(1):e}function L(e){let t,{guild:n,channel:a,permission:s,pendingAdditions:c,setPendingAdditions:d,isStageChannel:u=null!=a&&a.isGuildStageVoice(),description:m}=e,[b,y]=l.useState(!1),[E,S]=l.useState(""),w=(0,i.e7)([h.Z],()=>h.Z.getRoles(n.id));function O(e){let t=C(E.trim(),b);return RegExp("".concat(p.Z.escape(t)),"i").test(e)}let k=(0,i.Wu)([x.ZP],()=>x.ZP.getMemberIds(n.id));b?t=[]:u?t=g.Wx(n,w,a,s,O):0!==(t=g.ik(n,w,a,s,O)).length||""!==E.trim()||g.RD(n,w)||(t=g.aq());let L=g.iI(k,a,n,s,O),{placeholderText:N,hintText:P,renderEmptyText:A}={placeholderText:T.intl.string(T.t.iezLLi),hintText:T.intl.string(T.t["rwFx8/"]),renderEmptyText:e=>T.intl.format(T.t.ErpIY2,{query:e})};return(0,r.jsx)(M,{pendingAdditions:c,query:E,onQueryChange:function(e){let t=e.trim(),r="@"===t.charAt(0);f.Z.requestMembers(n.id,C(t,r),v.EQ),S(e),y(r)},onClickRow:function(e){let t=(0,j.G)(e);d(n=>{let r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},n);if(t in r)delete r[t];else{let n;e.rowType===v.aC.ROLE||e.rowType===v.aC.ADMINISTRATOR?n={type:o.Fj.ROLE,label:e.name,color:e.colorString}:(e.rowType===v.aC.MEMBER||e.rowType===v.aC.OWNER)&&(n={type:o.Fj.MEMBER,label:e.name,avatar:e.avatarURL}),null!=n&&(r[t]={display:n,row:e})}return r})},onRemovePendingAddition:function(e){d(t=>{let{[e]:n}=t;return function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(t,[e].map(R))})},roles:t,members:L,placeholderText:N,hintText:P,renderEmptyText:A,isStageChannel:u,description:m})}function M(e){let t,{listClassName:n,pendingAdditions:l,query:i,onQueryChange:s,onClickRow:o,onRemovePendingAddition:c,roles:d,members:u,placeholderText:m,hintText:x,renderEmptyText:h,isStageChannel:b,focusSearchAfterReady:y,isReady:f,description:p}=e;return(0,r.jsxs)("div",{className:w.content,children:[(null==(t=p)&&b&&(t=T.intl.string(T.t.f7VbhI)),null==t||""===t)?null:(0,r.jsx)(a.Text,{color:"header-secondary",className:w.description,variant:"text-sm/normal",children:t}),(0,r.jsx)(j.Z,{listClassName:n,pendingAdditions:l,query:i,onQueryChange:s,onClickRow:o,onRemovePendingAddition:c,roles:d,members:u,placeholderText:m,hintText:x,renderEmptyText:h,disabledText:b?T.intl.string(T.t.MVVOCg):null,focusSearchAfterReady:y,isReady:f,maxCount:S.ey})]})}function N(e){let{transitionState:t,onClose:n,channelId:o,newChannel:d,inSettings:x}=e,[f,p]=l.useState(!1),[g,j]=l.useState({}),S=(0,i.e7)([m.Z],()=>m.Z.getChannel(o),[o]),R=(0,i.e7)([h.Z],()=>h.Z.getGuild(null==S?void 0:S.getGuildId()));if(l.useEffect(()=>{b.default.track(E.rMx.OPEN_MODAL,{type:"Grant Channel Access"})},[]),null==S||null==R)return null;let O=d&&0===Object.keys(g).length;async function C(){if(null==S||0===Object.keys(g).length)return void n();p(!0);try{await function(e,t,n){let r=[];return Object.values(t).forEach(t=>{let{row:n}=t;null!=n.id&&""!==n.id&&(n.rowType===v.aC.ROLE?r.push((0,y.rX)(n.id,e.type)):n.rowType===v.aC.MEMBER&&r.push((0,y.jZ)(n.id,e.type)))}),(0,s.hw)(e.id,r,n)}(S,g,x),n(),p(!1)}catch(e){p(!1)}}let M=(0,u.zi)(S.type)?a.W4G:a.gjC;return(0,r.jsxs)(a.Y0X,{transitionState:t,size:a.CgR.SMALL,"aria-labelledby":k,className:w.modalRoot,parentComponent:"AddMembersModal",children:[(0,r.jsxs)(a.xBx,{separator:!1,direction:c.Z.Direction.VERTICAL,align:c.Z.Align.CENTER,className:w.header,children:[(0,r.jsx)(a.X6q,{id:k,variant:"heading-xl/semibold",children:T.intl.string(T.t.dMJ3Y2)}),(0,r.jsxs)(a.Text,{variant:"text-md/normal",color:"header-secondary",className:w.headerSubtitle,children:[(0,r.jsx)(M,{size:"xs",color:"currentColor",className:w.headerSubtitleIcon}),S.name]})]}),(0,r.jsx)(L,{guild:R,channel:S,permission:S.accessPermissions,pendingAdditions:g,setPendingAdditions:j}),(0,r.jsxs)(a.mzw,{children:[!O&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.zxk,{onClick:C,look:a.zxk.Looks.FILLED,size:a.zxk.Sizes.SMALL,className:w.button,submitting:f,children:T.intl.string(T.t.i4jeWV)}),(0,r.jsx)(a.zxk,{look:a.zxk.Looks.LINK,color:a.zxk.Colors.TRANSPARENT,onClick:n,size:a.zxk.Sizes.SMALL,children:T.intl.string(T.t["ETE/oK"])})]}),O&&(0,r.jsx)(a.zxk,{look:a.zxk.Looks.FILLED,color:a.zxk.Colors.PRIMARY,onClick:n,size:a.zxk.Sizes.SMALL,children:T.intl.string(T.t.u46sxc)})]})]})}},971628:function(e,t,n){n.d(t,{G:()=>v,Z:()=>T}),n(388685),n(781311);var r=n(255367),l=n(73800),i=n(120356),a=n.n(i),s=n(91192),o=n(481060),c=n(385499),d=n(600164),u=n(313201),m=n(565138),x=n(631969),h=n(605436),b=n(537383),y=n(71080),f=n(388032),p=n(208838);let g=(0,u.hQ)(),j=(0,u.hQ)();function v(e){return"".concat(e.rowType,":").concat(e.id)}function E(e){return(0,r.jsx)(o.vwX,{tag:"h5",className:a()(p.sectionTitle,p.rowHeight),children:e},e)}function S(e){var t,n;let{id:l,children:i,rowLabel:c,checked:u,onSelect:m,disabled:x,showCheckbox:h,selected:b,onMouseEnter:y,"aria-posinset":f,"aria-setsize":g}=e,j=(0,s.JA)(l);return(0,r.jsx)(o.P3F,(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},j),n=n={id:l,className:a()(p.addMemberRow,{[p.selectedRow]:b}),onClick:e=>{x||(e.preventDefault(),m())},onMouseEnter:y,role:"option","aria-disabled":x,"aria-selected":u,"aria-setsize":g,"aria-posinset":f,children:(0,r.jsxs)(d.Z,{justify:d.Z.Justify.BETWEEN,align:d.Z.Align.CENTER,children:[h?(0,r.jsx)(o.XZJ,{displayOnly:!0,size:18,value:u,type:o.XZJ.Types.INVERTED,disabled:x,children:(0,r.jsx)("div",{className:p.checkboxLabel,children:i})}):i,null!=c?(0,r.jsx)(o.Text,{color:"text-muted",variant:"text-xs/normal",children:c}):null]})},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))}function T(e){let{listClassName:t,pendingAdditions:n,query:i,onQueryChange:s,onClickRow:u,onRemovePendingAddition:T,roles:w=[],members:R=[],users:O=[],guilds:k=[],placeholderText:C,disabledText:L,hintText:M,searchTitleText:N,renderEmptyText:P,focusSearchAfterReady:A,isReady:Z,maxCount:z,hideRowLabel:I=!1}=e,B=l.useRef(null),D=l.useRef(null),$=[w.length,R.length,O.length,k.length],[U,_]=l.useState(!1),[q,F]=l.useState(0),[G,Q]=l.useState(-1);l.useEffect(()=>{var e;null==(e=B.current)||e.focus()},[]);let V=l.useCallback(function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(F(e),Q(t),n){var r;null==(r=D.current)||r.scrollToIndex({section:null!=e?e:0,row:null!=t?t:0,padding:8})}},[]),Y=l.useCallback((e,t)=>{if(null==t)return;s("");let n=(e===y.m$.ROLES?w:[])[t];n.rowType!==y.aC.EMPTY_STATE&&u(n)},[w,u,s]),J=l.useCallback(e=>{var t;null!=e&&e.rowType!==y.aC.EMPTY_STATE&&(u(e),s(""),null==(t=B.current)||t.focus())},[u,s]),X=l.useMemo(()=>Object.keys(n),[n]),H=l.useMemo(()=>R.some(e=>!e.disabled)||w.some(e=>!e.disabled)||O.some(e=>!e.disabled)||k.some(e=>!e.disabled),[R,w,O,k])||""===i.trim();function W(){var e;_(!(null==(e=D.current)?void 0:e.isScrolledToTop())&&H)}return l.useEffect(()=>{W()}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:a()(p.searchBox,{[p.scrollSeparator]:U}),children:[null!=N&&(0,r.jsx)(o.vwX,{tag:o.RB0.H5,children:N}),(0,r.jsx)(b.Z,{ref:B,query:i,onQueryChange:s,selectedSection:q,selectedRow:G,onSelectionChange:V,onSelect:Y,tags:X.map(e=>n[e].display),sections:$,onRemoveTag:function(e){T(X[e])},placeholder:C,focusAfterReady:A,isReady:Z,"aria-labelledby":g,"aria-controls":j}),null!=M?(0,r.jsx)(o.Text,{variant:"text-xs/normal",children:M}):null]}),H?(0,r.jsx)(o.aVo,{ref:D,className:a()(p.roleMemberList,t),sections:$,renderRow:e=>{let t,l,{section:i,row:s}=e,d=null,u=!1,x=!1,b=!1,f=null!=z&&Object.keys(n).length>=z;switch(i){case y.m$.ROLES:u=(l=v(d=w[s]))in n||d.disabled,x=d.disabled||!u&&f,b=q===y.m$.ROLES&&G===s,t=(0,r.jsxs)("div",{className:p.rowBody,children:[(0,r.jsx)("div",{className:a()(p.rowHeight,p.alignCenter),children:(0,r.jsx)(o.lZ8,{size:"custom",color:d.colorString,height:20})}),(0,r.jsxs)("div",{className:p.rowLabel,children:[(0,r.jsx)(o.Text,{variant:"text-sm/medium",className:p.__invalid_rowTitle,color:d.rowType===y.aC.EMPTY_STATE?"text-muted":"text-normal",children:d.name}),d.disabled&&null!=L?(0,r.jsx)(o.Text,{color:"header-secondary",variant:"text-xs/normal",children:L}):null]})]});break;case y.m$.MEMBERS:u=(l=v(d=R[s]))in n||d.disabled,x=d.disabled||!u&&f,b=q===y.m$.MEMBERS&&G===s,t=(0,r.jsxs)("div",{className:p.rowBody,children:[(0,r.jsx)(o.qEK,{src:d.avatarURL,size:o.EFr.SIZE_24,"aria-label":""}),(0,r.jsx)(o.Text,{className:p.rowLabel,variant:"text-sm/normal",children:d.name}),null!=d.nickname?(0,r.jsx)(o.Text,{color:"text-muted",className:p.rowLabelSubText,variant:"text-sm/normal","aria-hidden":!0,children:d.username}):null,d.bot&&(0,r.jsx)(c.Z,{verified:d.verifiedBot})]});break;case y.m$.USERS:u=(l=v(d=O[s]))in n||d.disabled,x=d.disabled||!u&&f,b=q===y.m$.USERS&&G===s,t=(0,r.jsxs)("div",{className:p.rowBody,children:[(0,r.jsx)(o.qEK,{src:d.avatarURL,size:o.EFr.SIZE_24,"aria-label":""}),(0,r.jsxs)("div",{className:p.rowLabel,children:[(0,r.jsx)(o.Text,{variant:"text-sm/normal",children:d.name}),d.disabled&&null!=L?(0,r.jsx)(o.Text,{color:"header-secondary",variant:"text-xs/normal",children:L}):null]})]});break;case y.m$.GUILDS:u=(l=v(d=k[s]))in n||d.disabled,x=d.disabled||!u&&f,b=q===y.m$.GUILDS&&G===s,t=(0,r.jsxs)("div",{className:p.rowBody,children:[(0,r.jsx)(m.Z,{guild:d.guild,active:!0,size:m.Z.Sizes.SMALLER}),(0,r.jsx)("div",{className:p.rowLabel,children:(0,r.jsx)(o.Text,{variant:"text-sm/medium",color:"text-normal",children:d.name})})]})}return null==d?null:(0,r.jsx)(S,{id:"user-row-".concat(s),rowLabel:I?null:h.zB(d.rowType),checked:u,disabled:x,onSelect:()=>J(d),showCheckbox:d.rowType!==y.aC.EMPTY_STATE,onMouseEnter:()=>V(i,s,!1),selected:b,"aria-posinset":s+1,"aria-setsize":$.reduce((e,t)=>e+t,0),children:t},l)},rowHeight:40,renderSection:e=>{let{section:t}=e;switch(t){case y.m$.ROLES:return E(f.intl.string(f.t.LPJmLy));case y.m$.MEMBERS:return E(f.intl.string(f.t["9Oq93t"]));case y.m$.USERS:return E(f.intl.string(f.t.nqDUBQ));case y.m$.GUILDS:return E(f.intl.string(f.t["7hB4kp"]))}},sectionHeight:32,onScroll:W,role:void 0,innerRole:"listbox",innerId:j,innerAriaMultiselectable:!0,innerAriaOrientation:"vertical"}):(0,r.jsxs)(d.Z,{className:t,align:d.Z.Align.CENTER,justify:d.Z.Justify.CENTER,direction:d.Z.Direction.VERTICAL,children:[(0,r.jsx)(x.Z,{className:p.noResultIcon}),(0,r.jsx)(o.Text,{variant:"text-sm/normal",children:P(i)})]})]})}},537383:function(e,t,n){n.d(t,{Z:()=>s});var r=n(255367),l=n(73800),i=n(461745),a=n(932197);let s=l.forwardRef(function(e,t){let{query:n,onQueryChange:l,onRemoveTag:s,onSelect:o,onSelectionChange:c,selectedSection:d,selectedRow:u,tags:m,sections:x,placeholder:h="",focusAfterReady:b,isReady:y,"aria-labelledby":f,"aria-controls":p}=e;return(0,r.jsx)(i.ZP,{autoFocus:!0,className:a.searchBar,maxHeight:100,onQueryChange:l,onRemoveTag:s,selectedSection:d,selectedRow:u,onSelect:o,onSelectionChange:c,placeholder:0===m.length?h:"",query:n,ref:t,size:i.ZP.Sizes.MEDIUM,tags:m,sections:x,focusAfterReady:b,isReady:y,inputProps:{"aria-labelledby":f,"aria-controls":p,"aria-expanded":!0,"aria-activedescendant":"user-row-".concat(u)}})})}}]);
//# sourceMappingURL=9db1d88dd437982d.js.map